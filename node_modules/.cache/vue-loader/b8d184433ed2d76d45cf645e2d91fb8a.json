{"remainingRequest":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ericchen/Desktop/parttime/xinxin/surface/src/components/other/apply.vue?vue&type=style&index=0&id=a9a8127a&lang=less&scoped=true&","dependencies":[{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/src/components/other/apply.vue","mtime":1564580565925},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.registerContent {\n  width: 100%;\n  padding: 100px calc(50% - 100px) 0 calc(50% - 400px);\n  .regRuleForm {\n    width: 500px;\n    .cardSelect {\n        width:100%;\n        // color: rgb(33,55,66);\n    }\n  }\n}\n/deep/ .el-button--primary {\n  background-color: #409eff;\n  border-color: #409eff;\n  border-radius: 0;\n}\n/deep/ .el-button--default {\n  border-radius: 0;\n}\n/deep/ .el-button--primary:hover,\n.el-button--primary:focus {\n  background-color: #66b1ff;\n  border-color: #66b1ff;\n}\n",{"version":3,"sources":["apply.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"apply.vue","sourceRoot":"src/components/other","sourcesContent":["<template>\n  <div class=\"registerContent\">\n    <el-form\n      :model=\"ruleForm\"\n      :rules=\"rules\"\n      ref=\"applyForm\"\n      label-width=\"100px\"\n      class=\"regRuleForm\"\n    >\n      <el-form-item label=\"选择时间\">\n        <el-col :span=\"11\">\n          <el-date-picker\n            type=\"date\"\n            placeholder=\"选择起始时间\"\n            v-model=\"ruleForm.date1\"\n            style=\"width: 100%;\"\n          ></el-date-picker>\n        </el-col>\n        <el-col class=\"line\" :span=\"2\">至</el-col>\n        <el-col :span=\"11\">\n          <el-date-picker placeholder=\"选择结束时间\" v-model=\"ruleForm.date2\" style=\"width: 100%;\"></el-date-picker>\n        </el-col>\n      </el-form-item>\n      <el-form-item label=\"银行卡号\">\n        <el-select class=\"cardSelect\" v-model=\"ruleForm.card\" placeholder=\"银行卡号\" @change=\"changeCard\">\n          <el-option v-for=\"(card,index) in cards\" :label=\"card.cardno\" :value=\"card.cardno\" :key=\"'card' + index\"></el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"银行名称\" prop=\"name\">\n        <el-input disabled v-model=\"ruleForm.name\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"账户名称\" prop=\"account\">\n        <el-input disabled v-model=\"ruleForm.account\"></el-input>\n      </el-form-item>\n      <el-form-item  label=\"开户行地址\" prop=\"address\">\n        <el-input disabled v-model=\"ruleForm.address\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"下发金额\" prop=\"money\">\n        <el-input v-model.number=\"ruleForm.money\"></el-input>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"submitForm()\">立交提交</el-button>\n        <el-button type=\"primary\" @click=\"seeSurplus()\">当前余额</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapMutations } from \"vuex\";\nimport { ApiList } from \"../../api/api\";\n\nexport default {\n  name: \"apply\",\n  data() {\n    return {\n      ruleForm: {\n        date1: \"\",\n        date2: \"\",\n        card: \"\",\n        name: \"\",\n        account: \"\",\n        address: \"\",\n        money: \"\"\n      },\n      rules: {\n        account: [\n          { required: true, message: \"请输入账户名称\", trigger: \"blur\" }\n        ],\n        name: [\n          { required: true, message: \"请输入银行名称\", trigger: \"blur\" }\n          //   { max: 10, message: \"长度在不超过 10 个字符\", trigger: \"blur\" }\n        ],\n        address: [\n          { required: true, message: \"请输入开户行地址\", trigger: \"blur\" }\n        ],\n        card: [\n          { required: true, message: \"请选择银行卡号\", trigger: \"change\" }\n        ],\n        money: [\n          { required: true, message: \"请输入下发金额\", trigger: \"blur\" },\n          { type: \"number\", message: \"金额必须为数值\",trigger: \"blur\" }\n        ]\n      },\n      cards:[],\n    };\n  },\n  created() {\n     let api = new ApiList();\n     api.getcardList().then(resp=>{\n        this.cards = resp.data.data;\n     });\n  },\n  methods: {\n    ...mapMutations([\"remove_editableTabs\"]),\n    changeCard() {\n      let card = this.cards.find(item=>{\n          return item.cardno = this.ruleForm.card;\n          });\n      this.ruleForm.name = card.bankname;\n      this.ruleForm.account = card.account;\n      this.ruleForm.address = card.bankaddress;\n    },\n    submitForm(type) {\n      this.$refs.applyForm.validate(valid => {\n        if (valid) {\n          let apiList = new ApiList();\n          apiList\n            .withdraw({\n              card_no: this.ruleForm.card,\n              cardhold: this.ruleForm.account,\n              bankname: this.ruleForm.name,\n              bankaddress: this.ruleForm.address,\n              amount:this.ruleForm.money\n            })\n            .then(resp => {\n              if (parseInt(resp.data.code) == 0) {\n                this.$message({\n                  type: \"success\",\n                  message: '提款申请成功!'\n                });\n                \n              } else {\n                this.$message.error(\"提款申请失败!\");\n              }\n            })\n            .catch(error => {\n              his.$message.error(\"提款申请失败:\" + error);\n            });\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    seeSurplus() {\n     let api = new ApiList();\n     api.seeBalance().then(resp=>{\n         debugger\n        this.ruleForm.money = parseInt(resp.data[0].balance);\n     });\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.registerContent {\n  width: 100%;\n  padding: 100px calc(50% - 100px) 0 calc(50% - 400px);\n  .regRuleForm {\n    width: 500px;\n    .cardSelect {\n        width:100%;\n        // color: rgb(33,55,66);\n    }\n  }\n}\n/deep/ .el-button--primary {\n  background-color: #409eff;\n  border-color: #409eff;\n  border-radius: 0;\n}\n/deep/ .el-button--default {\n  border-radius: 0;\n}\n/deep/ .el-button--primary:hover,\n.el-button--primary:focus {\n  background-color: #66b1ff;\n  border-color: #66b1ff;\n}\n</style>\n\n\n"]}]}