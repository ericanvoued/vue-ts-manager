{"remainingRequest":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ericchen/Desktop/parttime/xinxin/surface/src/components/common/base-menu.vue?vue&type=style&index=0&id=27629f72&lang=less&scoped=true&","dependencies":[{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/src/components/common/base-menu.vue","mtime":1564420779873},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.menu {\n  height: 100%;\n  width: 200px;\n  box-shadow: 0 0px 10px #d2ccc9;\n}\n.el-menu-vertical-demo:not(.el-menu--collapse) {\n  width: 200px;\n  min-height: 100%;\n}\n/deep/ .el-menu {\n  border: none;\n  text-align: left;\n}\n.order-icon {\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  margin-right: 5px;\n  background: url(\"../../assets/icon/order-icon.png\") left top no-repeat;\n}\n.info-icon {\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  margin-right: 5px;\n  background: url(\"../../assets/icon/info-icon.png\") left top no-repeat;\n}\n.list-icon {\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  margin-right: 5px;\n  background: url(\"../../assets/icon/list-icon.png\") left top no-repeat;\n}\n.dispatch-icon {\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  margin-right: 5px;\n  background: url(\"../../assets/icon/dispatch-icon.png\") left top no-repeat;\n}\n.manage-user-icon{\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  margin-right: 5px;\n  background: url(\"../../assets/icon/manage-user-icon.svg\") left top no-repeat;\n}\n/deep/ .el-menu-item.is-active,\n/deep/ .el-menu-item:hover,\n/deep/ .el-menu-item:focus {\n  color: #5684fa;\n  background-color: #e3ecf9;\n}\n/deep/ .el-submenu__title,\n/deep/ .el-menu-item {\n  font-size: 16px;\n}\n/deep/ .el-submenu.is-opened .el-submenu__title {\n  color: #5684fa;\n}\n.divlink {\n  width: 100%;\n  height: 100%;\n}\n",{"version":3,"sources":["base-menu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"base-menu.vue","sourceRoot":"src/components/common","sourcesContent":["<template>\n  <div class=\"menu\">\n    <el-menu\n      default-active=\"1-4-1\"\n      :unique-opened=\"true\"\n      class=\"el-menu-vertical-demo\"\n      @open=\"handleOpen\"\n      @close=\"handleClose\"\n      :collapse=\"isCollapse\"\n    >\n      <el-submenu :index=\"`${index+1}`\" v-for=\"(item,index) in menuList\" :key=\"index\">\n        <template slot=\"title\">\n          <i :class=\"item.name+'-icon'\"></i>\n          <span>{{item.title}}</span>\n        </template>\n        <template v-if=\"item.children && item.children.length>0\">\n          <template v-for=\"(child,cindex) in item.children\">\n            <div :key=\"cindex\">\n              <el-menu-item\n                  v-if=\"child.baserouteurl != '/home/register' && child.name != 'user-list'\"\n                  :index=\"`${index+1}-${cindex+1}`\"\n                >\n                  <div @click=\"addTabList(item, child)\" class=\"divlink\">{{child.title}}</div>\n                </el-menu-item>\n              <el-menu-item\n                v-if=\"(child.baserouteurl == '/home/register' || child.name == 'user-list') && isAdmin()\"\n                :index=\"`${index+1}-${cindex+1}`\"\n              >\n                <div @click=\"addTabList(item, child)\" class=\"divlink\">{{child.title}}</div>\n              </el-menu-item>\n            </div>\n          </template>\n          \n        </template>\n      </el-submenu>\n    </el-menu>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue, Watch } from \"vue-property-decorator\";\nimport { State, Mutation, Action } from \"vuex-class\";\nimport menuList from \"../../config/menu-config\";\nimport HomeModule from \"../../store/module/home/home-module\";\n\n@Component({\n  components: {}\n})\nexport default class BaseMenu extends Vue {\n  @State(\"HomeModule\") private HomeModule!: any;\n  @Mutation(\"add_editableTabs\") private add_editableTabs: any;\n  @Mutation(\"set_formParams\") private set_formParams: any;\n  @Action(\"getTableList\") private getTableList: any;\n  private isCollapse: Boolean = false;\n  private menuList: any = menuList;\n\n  created() {\n    this.initForm();\n  }\n    isAdmin() {\n      let userStr: any = sessionStorage.getItem(\"userInfo\");\n      let user: any = JSON.parse(userStr);\n      if(user.username.indexOf(\"admin\")>-1) {\n        return true;\n      }else {\n        return false;\n      }\n    }\n\n\n    initTab() {\n        if(this.$route.fullPath == '/home/table') {\n            if(this.menuList[0].children) {\n              this.add_editableTabs({\n                  ...this.menuList[0].children[0],\n                  url: `/home/table/1/${this.menuList[0].title}/${this.menuList[0].children[0].title}`\n              });\n            }else {\n                this.add_editableTabs({\n                    url: `/home/table/1/${this.menuList[0].title}/${this.menuList[0].children[0].title}`\n                });\n            }\n            this.$router.push(\"/home/table/1/订单管理/订单列表\")\n        }else {\n          this.initMenu()\n        }\n        \n    }\n\n  initMenu() {\n    this.menuList.map((item: any) => {\n      item.children.map((child: any) => {\n        if(child.title == this.$route.params.groupItem) {\n          this.add_editableTabs({\n              ...child,\n              url: `/home/table/1/${item.title}/${child.title}`\n          });\n        }\n      })\n    })\n  }\n\n\n  @Watch(\"HomeModule.formParams\")\n  watchMenu(newVal: any, oldVal: any) {\n    if (\n      newVal != oldVal &&\n      newVal.config.formList &&\n      newVal.config.formList.length\n    ) {\n      this.searchList();\n    }\n  }\n\n  searchList() {\n    let obj: any = {};\n    this.HomeModule.formParams.config.formList.map((item: any, index: any) => {\n      if (item.type == \"select\") {\n        this.$set(obj, item.name, item.value.value);\n      }\n      if (item.type == \"text\") {\n        this.$set(obj, item.name, item.value);\n      }\n      if (item.type == \"date\") {\n        this.$set(obj, item.name[0], this.formatDate(item.value[0]));\n        this.$set(obj, item.name[1], this.formatDate(item.value[1]));\n      }\n    });\n    this.getTableList({\n      url: this.HomeModule.formParams.config.apiurl,\n      params: obj\n    });\n  }\n\n  formatDate(date: any) {\n    date = new Date(date);\n    var y = date.getFullYear();\n    var m = date.getMonth() + 1;\n    var d = date.getDate();\n    m = m < 10 ? \"0\" + m : m;\n    d = d < 10 ? \"0\" + d : d;\n    return y + \"-\" + m + \"-\" + d;\n  }\n\n  initForm() {\n    this.initTab();\n    this.HomeModule.editableTabs2.map((item: any) => {\n      if (item.name == this.HomeModule.editableTabsValue2) {\n        this.set_formParams(item);\n      }\n    });\n  }\n  handleOpen(key: any, keyPath: any) {\n    console.log(key, keyPath);\n  }\n  handleClose(key: any, keyPath: any) {\n    console.log(key, keyPath);\n  }\n  addTabList(item: any, child: any) {\n    console.log(child.baserouteurl)\n    \n    \n\n    if(child.baserouteurl.indexOf('table') > -1) {\n      this.add_editableTabs({\n      // title: child.title,\n        ...child,\n        url: `/home/table/1/${item.title}/${child.title}`\n      });\n      this.set_formParams({\n        ...child,\n        url: `/home/table/1/${item.title}/${child.title}`\n      });\n        this.$router.push({ path: `/home/table/1/${item.title}/${child.title}` });\n    }else {\n      this.add_editableTabs({\n        // title: child.title,\n        ...child,\n        url: child.baserouteurl\n      });\n      this.set_formParams({\n        ...child,\n        url: child.baserouteurl\n      });\n      this.$router.push({ path: child.baserouteurl });\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.menu {\n  height: 100%;\n  width: 200px;\n  box-shadow: 0 0px 10px #d2ccc9;\n}\n.el-menu-vertical-demo:not(.el-menu--collapse) {\n  width: 200px;\n  min-height: 100%;\n}\n/deep/ .el-menu {\n  border: none;\n  text-align: left;\n}\n.order-icon {\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  margin-right: 5px;\n  background: url(\"../../assets/icon/order-icon.png\") left top no-repeat;\n}\n.info-icon {\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  margin-right: 5px;\n  background: url(\"../../assets/icon/info-icon.png\") left top no-repeat;\n}\n.list-icon {\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  margin-right: 5px;\n  background: url(\"../../assets/icon/list-icon.png\") left top no-repeat;\n}\n.dispatch-icon {\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  margin-right: 5px;\n  background: url(\"../../assets/icon/dispatch-icon.png\") left top no-repeat;\n}\n.manage-user-icon{\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  margin-right: 5px;\n  background: url(\"../../assets/icon/manage-user-icon.svg\") left top no-repeat;\n}\n/deep/ .el-menu-item.is-active,\n/deep/ .el-menu-item:hover,\n/deep/ .el-menu-item:focus {\n  color: #5684fa;\n  background-color: #e3ecf9;\n}\n/deep/ .el-submenu__title,\n/deep/ .el-menu-item {\n  font-size: 16px;\n}\n/deep/ .el-submenu.is-opened .el-submenu__title {\n  color: #5684fa;\n}\n.divlink {\n  width: 100%;\n  height: 100%;\n}\n</style>\n"]}]}