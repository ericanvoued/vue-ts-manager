{"remainingRequest":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ericchen/Desktop/parttime/xinxin/surface/src/components/common/base-menu.vue?vue&type=style&index=0&id=27629f72&lang=less&scoped=true&","dependencies":[{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/src/components/common/base-menu.vue","mtime":1575308232246},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.menu {\n  height: 100%;\n  width: 200px;\n  box-shadow: 0 0px 3px #d2ccc9;\n}\n.el-menu-vertical-demo:not(.el-menu--collapse) {\n  width: 200px;\n  min-height: 100%;\n}\n/deep/ .el-menu {\n  border: none;\n  text-align: left;\n}\n.order-icon {\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  margin-right: 5px;\n  background: url(\"../../assets/icon/order-icon.png\") left top no-repeat;\n}\n.info-icon {\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  margin-right: 5px;\n  background: url(\"../../assets/icon/info-icon.png\") left top no-repeat;\n}\n.list-icon {\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  margin-right: 5px;\n  background: url(\"../../assets/icon/list-icon.png\") left top no-repeat;\n}\n.dispatch-icon {\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  margin-right: 5px;\n  background: url(\"../../assets/icon/dispatch-icon.png\") left top no-repeat;\n}\n.manage-user-icon {\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  margin-right: 5px;\n  background: url(\"../../assets/icon/manage-user-icon.svg\") left top no-repeat;\n}\n/deep/ .el-menu-item.is-active,\n/deep/ .el-menu-item:hover,\n/deep/ .el-menu-item:focus {\n  color: #5684fa;\n  background-color: #e3ecf9;\n}\n/deep/ .el-submenu__title,\n/deep/ .el-menu-item {\n  font-size: 16px;\n}\n/deep/ .el-submenu.is-opened .el-submenu__title {\n  color: #5684fa;\n}\n.divlink {\n  width: 100%;\n  height: 100%;\n}\n",{"version":3,"sources":["base-menu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"base-menu.vue","sourceRoot":"src/components/common","sourcesContent":["<template>\n  <div class=\"menu\">\n    <el-menu\n      :default-active=\"HomeModule.activeTabIndex\"\n      :unique-opened=\"true\"\n      class=\"el-menu-vertical-demo\"\n      @open=\"handleOpen\"\n      @select=\"handleSelect\"\n      @close=\"handleClose\"\n      :collapse=\"isCollapse\"\n    >\n      <el-submenu :index=\"`${index+1}`\" v-for=\"(item,index) in menuList\" :key=\"index\">\n        <template slot=\"title\">\n          <i :class=\"item.name+'-icon'\"></i>\n          <span>{{item.title}}</span>\n        </template>\n        <template v-if=\"item.children && item.children.length>0\">\n          <template v-for=\"(child,cindex) in item.children\">\n            <div :key=\"cindex\">\n              <el-menu-item\n                v-if=\"child.baserouteurl != '/home/register' && child.baserouteurl != '/home/user-list' && child.baserouteurl != '/home/fee-rate-manager'\"\n                :index=\"`${index+1}-${cindex+1}`\"\n              >\n                <div @click=\"addTabList(item, child)\" class=\"divlink\">{{child.title}}</div>\n              </el-menu-item>\n              <el-menu-item\n                v-if=\"(child.baserouteurl == '/home/register'|| child.baserouteurl == '/home/user-list' || child.baserouteurl == '/home/fee-rate-manager') && isAdmin()\"\n                :index=\"`${index+1}-${cindex+1}`\"\n              >\n                <div @click=\"addTabList(item, child)\" class=\"divlink\">{{child.title}}</div>\n              </el-menu-item>\n            </div>\n          </template>\n        </template>\n      </el-submenu>\n    </el-menu>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue, Watch } from \"vue-property-decorator\";\nimport { State, Mutation, Action } from \"vuex-class\";\nimport menuList from \"../../config/menu-config\";\nimport HomeModule from \"../../store/module/home/home-module\";\n\n@Component({\n  components: {}\n})\nexport default class BaseMenu extends Vue {\n  @State(\"HomeModule\") private HomeModule!: any;\n  @Mutation(\"add_editableTabs\") private add_editableTabs: any;\n  @Mutation(\"set_formParams\") private set_formParams: any;\n  @Mutation(\"set_activeTabIndex\") private set_activeTabIndex: any;\n  @Mutation(\"set_editableTabsValue2\") private set_editableTabsValue2: any;\n  @Action(\"getTableList\") private getTableList: any;\n  private isCollapse: Boolean = false;\n  private menuList: any = menuList;\n\n  created() {\n    this.$nextTick(() => {\n      this.initForm();\n    })\n  }\n  isAdmin() {\n    let userStr: any = sessionStorage.getItem(\"userInfo\");\n    let user: any = JSON.parse(userStr);\n    if (user.username.indexOf(\"admin\") > -1) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  initTab() {\n    if (this.$route.fullPath == \"/home\") {\n      this.set_activeTabIndex('1-1')\n      if (this.menuList[0].children) {\n        this.add_editableTabs({\n          ...this.menuList[0].children[0],\n          url: this.menuList[0].children[0].baserouteurl\n        });\n      } else {\n        this.add_editableTabs({\n          url: this.menuList[0].children[0].baserouteurl\n        });\n      }\n      this.$router.push(this.menuList[0].children[0].baserouteurl);\n    } else {\n      this.initMenu();\n    }\n  }\n\n  initMenu() {\n    let activeMenu: any = '';\n    this.menuList.map((item: any, index: number) => {\n      item.children.map((child: any, cIndex: number) => {\n        if (child.baserouteurl == this.$route.fullPath) {\n          activeMenu = (index +1) + \"-\" + (cIndex + 1);\n          this.set_activeTabIndex(activeMenu)\n          this.add_editableTabs({\n            ...child,\n            activeMenu: activeMenu,\n            url: child.baserouteurl\n          });\n        }\n      });\n    });\n  }\n\n  @Watch(\"HomeModule.formParams\")\n  watchMenu(newVal: any, oldVal: any) {\n    if (\n      newVal != oldVal &&\n      newVal.hasOwnProperty(\"config\") &&\n      newVal.config.formList &&\n      newVal.config.formList.length\n    ) {\n      this.searchList();\n    }\n  }\n\n  searchList() {\n    let obj: any = {};\n    this.HomeModule.formParams.config.formList.map((item: any, index: any) => {\n      if (item.type == \"select\") {\n        this.$set(obj, item.name, item.value.value);\n      }\n      if (item.type == \"text\") {\n        this.$set(obj, item.name, item.value);\n      }\n      if (item.type == \"date\") {\n        this.$set(obj, item.name[0], this.formatDate(item.value[0]));\n        this.$set(obj, item.name[1], this.formatDate(item.value[1]));\n      }\n    });\n    this.getTableList({\n      url: this.HomeModule.formParams.config.apiurl,\n      params: obj\n    });\n  }\n\n  formatDate(date: any) {\n    date = new Date(date);\n    var y = date.getFullYear();\n    var m = date.getMonth() + 1;\n    var d = date.getDate();\n    m = m < 10 ? \"0\" + m : m;\n    d = d < 10 ? \"0\" + d : d;\n    return y + \"-\" + m + \"-\" + d;\n  }\n\n  initForm() {\n    this.initTab();\n    this.HomeModule.editableTabs2.map((item: any) => {\n      if (item.name == this.HomeModule.editableTabsValue2) {\n        this.set_formParams(item);\n      }\n    });\n  }\n  handleOpen(key: any, keyPath: any) {\n    console.log(key, keyPath);\n  }\n\n  handleSelect(key: any, keyPath: any) {\n    console.log(key, keyPath);\n    let pIndex = key[0] - 1;\n    let rIndex = key[2] - 1;\n    if(this.menuList[pIndex].children[rIndex].baserouteurl == this.$route.fullPath) {\n      return;\n    }\n\n    let tabExitFlag: boolean = false;\n    this.HomeModule.editableTabs2.map((cItem: any, Cindex: number) => {\n      if(cItem.baserouteurl == this.menuList[pIndex].children[rIndex].baserouteurl) {\n        tabExitFlag = true;\n        this.set_editableTabsValue2(cItem.name + \"\")\n      }\n    })\n\n    if(!tabExitFlag) {\n      this.set_activeTabIndex(key)\n      this.add_editableTabs({\n        ...this.menuList[pIndex].children[rIndex],\n        activeMenu: key,\n        url: this.menuList[pIndex].children[rIndex].baserouteurl\n      });\n    }\n\n    this.set_formParams({\n      ...this.menuList[pIndex].children[rIndex],\n      url: this.menuList[pIndex].children[rIndex].baserouteurl\n    });\n    this.$router.push({ path: this.menuList[pIndex].children[rIndex].baserouteurl });\n  }\n\n  handleClose(key: any, keyPath: any) {\n    // console.log(key, keyPath);\n    \n  }\n\n  /**\n   * 点击方法暂时被 handleSelect 替换\n   * 2019-11-29 eric\n   */\n  addTabList(item: any, child: any) {\n    if(child.baserouteurl == this.$route.fullPath) {\n      return;\n    }\n    // let tabExitFlag: boolean = false;\n    // this.HomeModule.editableTabs2.map((cItem: any, Cindex: number) => {\n    //   if(child.title == cItem.title) {\n        // this.set_editableTabsValue2(cItem.name + \"\")\n        // tabExitFlag = true;\n      // }\n    // })\n    // if(!tabExitFlag) {\n    //   this.add_editableTabs({\n    //     ...child,\n    //     url: child.baserouteurl\n    //   });\n    // }\n\n    // this.set_formParams({\n    //   ...child,\n    //   url: child.baserouteurl\n    // });\n    // this.$router.push({ path: child.baserouteurl });\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.menu {\n  height: 100%;\n  width: 200px;\n  box-shadow: 0 0px 3px #d2ccc9;\n}\n.el-menu-vertical-demo:not(.el-menu--collapse) {\n  width: 200px;\n  min-height: 100%;\n}\n/deep/ .el-menu {\n  border: none;\n  text-align: left;\n}\n.order-icon {\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  margin-right: 5px;\n  background: url(\"../../assets/icon/order-icon.png\") left top no-repeat;\n}\n.info-icon {\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  margin-right: 5px;\n  background: url(\"../../assets/icon/info-icon.png\") left top no-repeat;\n}\n.list-icon {\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  margin-right: 5px;\n  background: url(\"../../assets/icon/list-icon.png\") left top no-repeat;\n}\n.dispatch-icon {\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  margin-right: 5px;\n  background: url(\"../../assets/icon/dispatch-icon.png\") left top no-repeat;\n}\n.manage-user-icon {\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  margin-right: 5px;\n  background: url(\"../../assets/icon/manage-user-icon.svg\") left top no-repeat;\n}\n/deep/ .el-menu-item.is-active,\n/deep/ .el-menu-item:hover,\n/deep/ .el-menu-item:focus {\n  color: #5684fa;\n  background-color: #e3ecf9;\n}\n/deep/ .el-submenu__title,\n/deep/ .el-menu-item {\n  font-size: 16px;\n}\n/deep/ .el-submenu.is-opened .el-submenu__title {\n  color: #5684fa;\n}\n.divlink {\n  width: 100%;\n  height: 100%;\n}\n</style>\n"]}]}