{"remainingRequest":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ericchen/Desktop/parttime/xinxin/surface/src/components/team-home/home-table.vue?vue&type=style&index=1&lang=less&","dependencies":[{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/src/components/team-home/home-table.vue","mtime":1575469770279},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  .liststatus-fail{\n  color: red;\n}\n\n.liststatus-succeed{\n  color: green;\n}\n",{"version":3,"sources":["home-table.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2PA;AACA;AACA;;AAEA;AACA;AACA","file":"home-table.vue","sourceRoot":"src/components/team-home","sourcesContent":["<template>\n  <div class=\"home-table\">\n    <el-table \n      v-loading=\"HomeModule.loading\" \n      :data=\"HomeModule.tableList\" \n      height=\"100%\" \n      element-loading-customClass='table-loading'\n      element-loading-text=\"数据加载中\"\n      style=\"width: 100%\">\n          <template v-for=\"(item, index) of HomeModule.formParams.keyMap\">\n            <el-table-column\n              v-if=\"index != 'optConfig'\"\n              :key=\"index\"\n              :fixed='index==0' \n              :prop=\"index\"\n              :label=\"item\"\n\t\t\t  :width=\"retWidth(index)\"\n            >\n            <template slot-scope=\"scope\">\n              <span :class=\"returnClass(index, scope.row[index])\">{{ scope.row[index] }}</span>\n            </template></el-table-column>\n          </template>\n          <el-table-column v-if=\"HomeModule.formParams.keyMap.optConfig.show\" label=\"操作\" width=\"100\">\n            <template slot-scope=\"scope\">\n                <div>\n\t\t\t\t\t<el-dropdown trigger=\"hover\" class=\"table-dropdown\" v-if=\"$route.fullPath.indexOf('/home/order-list') == -1\">\n\t\t\t\t\t\t<span class=\"el-dropdown-link\">\n\t\t\t\t\t\t\t{{HomeModule.formParams.keyMap.optConfig.name}}<i class=\"el-icon-arrow-down el-icon--right\"></i>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<el-dropdown-menu class=\"table-dropdown-menu\" slot=\"dropdown\">\n\t\t\t\t\t\t\t<el-dropdown-item \n\t\t\t\t\t\t\tv-for=\"(child, cindex) in HomeModule.formParams.keyMap.optConfig.optList\" \n\t\t\t\t\t\t\t:key=\"cindex\"\n\t\t\t\t\t\t\t@click.native='optEvent(child, scope.$index, scope.row)'\n\t\t\t\t\t\t\t:command='child'\n\t\t\t\t\t\t\t>{{child.label}}</el-dropdown-item>\n\t\t\t\t\t\t</el-dropdown-menu>\n\t\t\t\t\t\t<!-- <el-dropdown-menu v-if=\"isOrderListPage\" class=\"table-dropdown-menu\" slot=\"dropdown\">\n\t\t\t\t\t\t\t<el-dropdown-item \n\t\t\t\t\t\t\tv-for=\"(child, cindex) in HomeModule.formParams.keyMap.optConfig.optList\" \n\t\t\t\t\t\t\t:key=\"cindex\"\n\t\t\t\t\t\t\t:class=\"returnClass(index, scope.row[index])\"\n\t\t\t\t\t\t\t@click.native='optEvent(child, scope.$index, {cardno: scope.row.id})'\n\t\t\t\t\t\t\t:command='child'\n\t\t\t\t\t\t\t>{{child.label}}</el-dropdown-item>\n\t\t\t\t\t\t</el-dropdown-menu> -->\n\t\t\t\t\t</el-dropdown>\n\t\t\t\t\t<template v-if=\"isOrderListPage\">\n\t\t\t\t\t\t<span \n\t\t\t\t\t\t\tv-for=\"(child, cindex) in HomeModule.formParams.keyMap.optConfig.optList\" \n\t\t\t\t\t\t\t:key=\"cindex\"\n\t\t\t\t\t\t\tclass=\"add-order-btn\" \n\t\t\t\t\t\t\t:class=\"{'disable': scope.row.liststatus != '已支付' || !isAdmin()}\" \n\t\t\t\t\t\t\t@click='optEvent(child, scope.$index, scope.row)'\n\t\t\t\t\t\t>{{child.label}}</span>\n\t\t\t\t\t</template>\n\t\t\t\t\t\n\t\t\t\t</div>\n                \n            </template>\n          </el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Vue, Watch } from \"vue-property-decorator\";\nimport { State, Mutation, Action } from 'vuex-class';\nimport { tableData } from \"../../mock/home-table\";\nimport { widthConfig } from \"../../config/table-width-config\";\n// import { ApiList } from '../../api/api';\n\n@Component\nexport default class HomeTable extends Vue {\n\t@State(\"HomeModule\") private HomeModule!: any;\n\t@Action(\"getTableList\") private getTableList: any;\n\tprivate tableData: any = tableData;\n\n  \tprivate isStatics: any = window.location.href.indexOf('/home/data-countup');\n\tprivate isOrderListPage: boolean = window.location.href.indexOf('/home/order-list') > -1;\n\n\t@Watch(\"$route\")\n\tWatchRoute(newVal: any, oldVal: any) {\n\t\tif(newVal.path != oldVal.path) {\n\t\t\tconsole.log(\"route\")\n\t\t\tthis.isOrderListPage = this.$route.path.indexOf('/home/order-list') > -1;\n\t\t}\n\t}\n\n\tretWidth(key: string) {\n\t\treturn widthConfig[key];\n\t}\n\n\tisAdmin() {\n\t\tlet userStr: any = sessionStorage.getItem(\"userInfo\");\n\t\tlet user: any = JSON.parse(userStr);\n\t\tif (user.username.indexOf(\"admin\") > -1) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\toptEvent(item: any, a: any, b: any) {\n\t\tconsole.log(b)\n\t\tif(this.isOrderListPage && (b.liststatus != '已支付' || !this.isAdmin())){\n\t\t\treturn\n\t\t}\n\t\tthis.$confirm(`是否执行${item.label}操作`, '提示', {\n\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\tcancelButtonText: '取消',\n\t\t\t\ttype: 'warning'\n\t\t\t}).then(() => {\n\t\t\t\tlet obj: any = {}\n\t\t\t\tthis.$set(obj, item.name, this.isOrderListPage? b.id: b.cardno)\n\t\t\t\tthis.$apiList.handleTableData(item.apiUrl, obj).then((data: any) => {\n\t\t\t\t\tif(data.data.code == 0 || data.data.data.code == \"success\") {\n\t\t\t\t\t\tthis.$message.success(data.data.data.message);\n\t\t\t\t\tif(!this.isOrderListPage) {\n\t\t\t\t\t\tthis.searchList();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t}else {\n\t\t\t\t\t\tthis.$message.error(data.data.data.message)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}).catch(() => {\n\t\t\t\tthis.$message({\n\t\t\t\t\ttype: 'info',\n\t\t\t\t\tmessage: `已取消${item.label}`\n\t\t\t\t});          \n\t\t});\n    \n  \t}\n\n\n    searchList(){\n        let obj: any = {};\n        this.HomeModule.formParams.config.formList.map((item: any, index: any) => {\n            if(item.type == 'select') {\n                this.$set(obj, item.name, item.value.value)\n            }\n            if(item.type == 'text') {\n                this.$set(obj, item.name, item.value)\n            }\n            if(item.type == 'date') {\n                this.$set(obj, item.name[0], this.formatDate(item.value[0]))\n                this.$set(obj, item.name[1], this.formatDate(item.value[1]))\n            }\n        })\n        this.getTableList({url: this.HomeModule.formParams.config.apiurl,params: obj});\n    }\n\n    formatDate(date: any){\n        date = new Date(date);\n        var y=date.getFullYear();\n        var m=date.getMonth()+1;\n        var d=date.getDate();\n        m = m<10?(\"0\"+m):m;\n        d = d<10?(\"0\"+d):d;\n        return y+\"-\"+m+\"-\"+d;\n    }\n\n    returnClass(index: string, n?: any) {\n      if(index == 'liststatus' && n == \"未支付\") {\n        return \"liststatus-fail\"\n      }else if(index == 'liststatus' && n == \"已支付\") {\n        return \"liststatus-succeed\"\n      }else {\n        return ''\n      }\n    }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.home-table {\n  height: calc(~\"100vh - 246px\");\n  width: calc(~\"100% - 70px\");\n  text-align: center;\n  box-shadow: 0 0 3px rgba(0, 0, 0, 0.15);\n  margin: 20px 20px 0;\n  border-radius: 5px;\n  overflow: scroll;\n  padding: 0 7px;\n}\n/deep/ .el-table__row {\n  height: 42px;\n  td {\n    padding: 0;\n    line-height: 42px;\n    height: 42px;\n    text-align: center;\n  }\n  th {\n  }\n}\n\n/deep/ .el-table th {\n  font-weight: bold;\n  // padding: 5px 10px;\n  width: max-content;\n  text-align: center;\n}\n.table-dropdown{\n    /deep/ .el-dropdown-selfdefine{\n        color: #5584fa;\n    }\n    \n}\n.table-dropdown-menu /deep/ .el-dropdown-menu__item{\n        color: #5584fa;\n    }\n .table-dropdown-menu /deep/ .el-dropdown-menu__item:not(.is-disabled):hover{\n     color: #fff;\n     background-color: #ef6508;\n    }\n    /deep/ .el-loading-spinner{\n      p.el-loading-text{\n        color: #5584fa;\n      }\n      .circular .path{\n        stroke: #5584fa;\n      }\n      \n    }\n    /deep/ .el-table--enable-row-hover .el-table__body tr:hover > td{\n      background-color: #cad8fc;\n    }\n    /deep/ .el-table td{\n      border-bottom: none;\n    }\n    /deep/ .el-table__row:nth-child(2n-1) td{\n      background-color: #f9f9f9;\n\t}\n\t.add-order-btn{\n\t\tcursor: pointer;\n\t\tcolor: #5584fa;\n\t\ttransition: all .25s;\n\t\t&:hover{\n\t\t\ttext-decoration: underline;\n\t\t}\n\t\t&.disable{\n\t\t\tcursor: no-drop;\n\t\t\tcolor: #aaa;\n\t\t\ttext-decoration: none;\n\t\t}\n\t\t\n\t}\n</style>\n<style lang=\"less\">\n  .liststatus-fail{\n  color: red;\n}\n\n.liststatus-succeed{\n  color: green;\n}\n</style>\n\n"]}]}