{"remainingRequest":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/thread-loader/dist/cjs.js!/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/babel-loader/lib/index.js!/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ericchen/Desktop/parttime/xinxin/surface/src/components/other/fee-rate-manager.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/src/components/other/fee-rate-manager.vue","mtime":1575352517152},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { keys.push.apply(keys, Object.getOwnPropertySymbols(object)); } if (enumerableOnly) keys = keys.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState, mapMutations } from \"vuex\";\nimport { ApiList } from \"../../api/api\";\nimport { currentcy } from \"@/config/number\";\nexport default {\n  name: \"FeeRateManager\",\n  data: function data() {\n    return {\n      ruleForm: {\n        card: \"\",\n        cardhold: \"\",\n        feeRate: []\n      },\n      currentUser: {},\n      rules: {},\n      cards: [],\n      feeRate: []\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    var api = new ApiList();\n    api.getAdminList().then(function (resp) {\n      _this.cards = resp.data.data;\n    });\n  },\n  methods: _objectSpread({}, mapMutations([\"remove_editableTabs\"]), {\n    changeFee: function changeFee(item) {\n      var _this2 = this;\n\n      var api = new ApiList();\n      api.changeFee(item).then(function (resp) {\n        if (parseInt(resp.data.code) == 0) {\n          _this2.$message({\n            type: \"success\",\n            message: \"修改成功！\"\n          });\n        } else {\n          _this2.$message.error(resp.data.data.message);\n        }\n      }).catch(function (error) {\n        console.log(error);\n\n        _this2.$message.error(\"提交失败\");\n      });\n    },\n    deleteFee: function deleteFee(item) {\n      var _this3 = this;\n\n      var api = new ApiList();\n      api.deleteFee(item).then(function (resp) {\n        console.log(resp);\n\n        if (parseInt(resp.data.code) == 0) {\n          _this3.$message({\n            type: \"success\",\n            message: \"删除成功\"\n          });\n\n          item.fee = null;\n        } else {\n          _this3.$message.error(resp.data.data.message);\n        }\n      }).catch(function (error) {\n        console.log(error);\n\n        _this3.$message.error(\"提交失败\");\n      });\n    },\n    changeCard: function changeCard(value) {\n      var _this4 = this;\n\n      var api = new ApiList();\n      var user = {};\n      this.cards.map(function (item) {\n        item.username == value ? user = item : null;\n      }); // let userInfo = sessionStorage.getItem(\"userInfo\");\n      //   let params = {\n      //     userId: JSON.parse(userInfo).id\n      //   }\n\n      api.searchFeeRate({\n        userId: user.id\n      }).then(function (data) {\n        _this4.feeRate = data.data.data;\n\n        _this4.feeRate.map(function (item) {\n          item.userid = user.id;\n        });\n      });\n      this.currentUser = user;\n    },\n    submitForm: function submitForm(type) {\n      var _this5 = this;\n\n      if (this.feeRate.length == 0) {\n        this.$message.error(\"请选择商户!\");\n        return;\n      }\n\n      this.$refs.applyForm.validate(function (valid) {\n        if (valid) {\n          var apiList = new ApiList();\n          apiList.feeAdd({\n            data: _this5.feeRate\n          }).then(function (resp) {\n            console.log(resp);\n\n            if (parseInt(resp.data.code) == 0) {\n              _this5.$message({\n                type: \"success\",\n                message: resp.data.data.message\n              });\n            } else {\n              _this5.$message.error(resp.data.data.message);\n            }\n          }).catch(function (error) {\n            console.log(error);\n\n            _this5.$message.error(\"提交失败\");\n          });\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    seeSurplus: function seeSurplus() {\n      var _this6 = this;\n\n      var api = new ApiList();\n      api.seeBalance().then(function (resp) {\n        // this.ruleForm.curent = '1323';\n        // this.ruleForm.curent = resp.data[0].balance;\n        _this6.ruleForm.money = resp.data[0].balance;\n      });\n    }\n  })\n};",{"version":3,"sources":["fee-rate-manager.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"registerContent\">\n    <el-form\n      :model=\"ruleForm\"\n      :rules=\"rules\"\n      ref=\"applyForm\"\n      label-width=\"100px\"\n      class=\"regRuleForm\"\n    >\n      <el-form-item label=\"商户名称：\" style=\"width: 500px;\">\n        <el-select\n          class=\"cardSelect\"\n          v-model=\"ruleForm.card\"\n          placeholder=\"商户名称\"\n          @change=\"changeCard\"\n        >\n          <el-option\n            v-for=\"(card, index) in cards\"\n            :label=\"card.username\"\n            :value=\"card.username\"\n            :key=\"'card' + index\"\n          ></el-option>\n        </el-select>\n      </el-form-item>\n      <template v-if=\"feeRate.length > 0\">\n          <div class=\"form-wrap\" v-for=\"(item, index) in feeRate\" :key=\"index\" style=\"display: flex;width: 800px\">\n            <el-form-item :label=\"item.gatewayname\" style=\"width: 60%;margin-right: 20px;\">\n              <el-input type=\"number\" v-model.number=\"item.fee\"></el-input>\n            </el-form-item>\n            <div class=\"right\">\n              <el-button size=\"small\" @click=\"changeFee(item)\" type=\"primary\">修改费率</el-button>\n              <el-button size=\"small\" @click=\"deleteFee(item)\" type=\"danger\">删除费率</el-button>\n            </div>\n          </div>\n          \n      </template>\n\n      <el-form-item>\n        <el-button style=\"position: relative;left: -320px;\" type=\"primary\" @click=\"submitForm()\">保存商户费率</el-button>\n        <!-- <el-button type=\"primary\" @click=\"seeSurplus()\">当前余额</el-button> -->\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapMutations } from \"vuex\";\nimport { ApiList } from \"../../api/api\";\nimport { currentcy } from \"@/config/number\";\n\nexport default {\n  name: \"FeeRateManager\",\n  data() {\n    return {\n      ruleForm: {\n        card: \"\",\n        cardhold: \"\",\n        feeRate: []\n      },\n      currentUser: {},\n      rules: {},\n      cards: [],\n      feeRate: []\n    };\n  },\n  created() {\n    let api = new ApiList();\n    api.getAdminList().then(resp => {\n      this.cards = resp.data.data;\n    });\n  },\n  methods: {\n    ...mapMutations([\"remove_editableTabs\"]),\n    changeFee(item) {\n      let api = new ApiList();\n      api.changeFee(item).then(resp => {\n          if (parseInt(resp.data.code) == 0) {\n            this.$message({\n              type: \"success\",\n              message: \"修改成功！\"\n            });\n          } else {\n            this.$message.error(resp.data.data.message);\n          }\n        })\n        .catch(error => {\n          console.log(error);\n          this.$message.error(\"提交失败\");\n        });\n    },\n    deleteFee(item) {\n      let api = new ApiList();\n      api.deleteFee(item).then(resp => {\n          console.log(resp);\n          if (parseInt(resp.data.code) == 0) {\n            this.$message({\n              type: \"success\",\n              message: \"删除成功\"\n            });\n            item.fee = null;\n          } else {\n            this.$message.error(resp.data.data.message);\n          }\n        })\n        .catch(error => {\n          console.log(error);\n          this.$message.error(\"提交失败\");\n        });\n    },\n    changeCard(value) {\n      let api = new ApiList();\n      let user = {};\n      this.cards.map(item => {\n        item.username == value ? (user = item) : null;\n      });\n      // let userInfo = sessionStorage.getItem(\"userInfo\");\n      //   let params = {\n      //     userId: JSON.parse(userInfo).id\n      //   }\n      api.searchFeeRate({userId: user.id}).then(data => {\n        this.feeRate = data.data.data;\n        this.feeRate.map(item => {\n          item.userid = user.id;\n        });\n      });\n      this.currentUser = user;\n    },\n    submitForm(type) {\n      if (this.feeRate.length == 0) {\n        this.$message.error(\"请选择商户!\");\n        return;\n      }\n      this.$refs.applyForm.validate(valid => {\n        if (valid) {\n          let apiList = new ApiList();\n          apiList\n            .feeAdd({ data: this.feeRate })\n            .then(resp => {\n              console.log(resp);\n              if (parseInt(resp.data.code) == 0) {\n                this.$message({\n                  type: \"success\",\n                  message: resp.data.data.message\n                });\n              } else {\n                this.$message.error(resp.data.data.message);\n              }\n            })\n            .catch(error => {\n              console.log(error);\n              this.$message.error(\"提交失败\");\n            });\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    seeSurplus() {\n      let api = new ApiList();\n      api.seeBalance().then(resp => {\n        // this.ruleForm.curent = '1323';\n        // this.ruleForm.curent = resp.data[0].balance;\n        this.ruleForm.money = resp.data[0].balance;\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n.registerContent {\n  width: 100%;\n  padding: 100px calc(50% - 100px) 0 calc(50% - 400px);\n  .regRuleForm {\n    // width: 500px;\n    .cardSelect {\n      width: 100%;\n      // color: rgb(33,55,66);\n    }\n  }\n}\n/deep/ .el-form-item__label {\n  width: 160px !important;\n}\n/deep/ .el-form-item__content {\n  margin-left: 160px !important;\n}\n/deep/ .el-button--primary {\n  background-color: #409eff;\n  border-color: #409eff;\n  border-radius: 0;\n}\n/deep/ .el-button--default {\n  border-radius: 0;\n}\n/deep/ .el-button--primary:hover,\n.el-button--primary:focus {\n  background-color: #66b1ff;\n  border-color: #66b1ff;\n}\n.current-money {\n  color: #999;\n  text-align: left;\n}\n.rest-money {\n  text-align: left;\n  position: relative;\n  top: -15px;\n  &.danger {\n    color: red;\n  }\n}\n</style>\n"],"sourceRoot":"src/components/other"}]}