{"remainingRequest":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/babel-loader/lib/index.js!/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/ts-loader/index.js??ref--13-2!/Users/ericchen/Desktop/parttime/xinxin/surface/src/api/axios.ts","dependencies":[{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/src/api/axios.ts","mtime":1564165698805},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import axios from 'axios'; // axios 配置\n\naxios.defaults.timeout = 10000; // http request 设置请求信息\n\naxios.interceptors.request.use(function (config) {\n  if (sessionStorage.token && sessionStorage.token !== null) {\n    config.headers.Authorization = sessionStorage.token; // `token ${store.state.token}`\n  }\n\n  return config;\n}, function (err) {\n  return Promise.reject(err);\n}); // http response 拦截器\n\naxios.interceptors.response.use(function (response) {\n  console.log(response);\n  var res = response.data;\n  console.log(res);\n\n  if (res.data.message && res.data.message.indexOf('重新登录') > -1) {\n    sessionStorage.removeItem(\"userInfo\");\n    setTimeout(function () {\n      location.reload();\n    }, 150);\n    return;\n  }\n\n  return response;\n}, function (error) {\n  if (error.code === 'ECONNABORTED') {}\n\n  if (error.response) {\n    switch (error.response.status) {\n      case 401:\n      case 403:\n        break;\n\n      case 500:\n      case 504:\n        // this.$router.push({'path': '/error'})\n        break;\n    }\n  }\n\n  return Promise.reject(error.response.data);\n});\nexport default axios;",{"version":3,"sources":["/Users/ericchen/Desktop/parttime/xinxin/surface/src/api/axios.ts"],"names":[],"mappings":"AAAA,OAAO,KAAP,MAAkB,OAAlB,C,CAEA;;AACA,KAAK,CAAC,QAAN,CAAe,OAAf,GAAyB,KAAzB,C,CACA;;AACA,KAAK,CAAC,YAAN,CAAmB,OAAnB,CAA2B,GAA3B,CAA+B,UAAC,MAAD,EAAe;AAC1C,MAAI,cAAc,CAAC,KAAf,IAAwB,cAAc,CAAC,KAAf,KAAyB,IAArD,EAA2D;AACzD,IAAA,MAAM,CAAC,OAAP,CAAe,aAAf,GAA+B,cAAc,CAAC,KAA9C,CADyD,CACL;AACrD;;AACD,SAAO,MAAP;AACD,CALH,EAKI,UAAC,GAAD,EAAY;AACZ,SAAO,OAAO,CAAC,MAAR,CAAe,GAAf,CAAP;AACD,CAPH,E,CASA;;AACA,KAAK,CAAC,YAAN,CAAmB,QAAnB,CAA4B,GAA5B,CAAgC,UAAC,QAAD,EAAiB;AAC/C,EAAA,OAAO,CAAC,GAAR,CAAY,QAAZ;AACA,MAAI,GAAG,GAAQ,QAAQ,CAAC,IAAxB;AACA,EAAA,OAAO,CAAC,GAAR,CAAY,GAAZ;;AACA,MAAG,GAAG,CAAC,IAAJ,CAAS,OAAT,IAAoB,GAAG,CAAC,IAAJ,CAAS,OAAT,CAAiB,OAAjB,CAAyB,MAAzB,IAAmC,CAAC,CAA3D,EAA8D;AAC5D,IAAA,cAAc,CAAC,UAAf,CAA0B,UAA1B;AACA,IAAA,UAAU,CAAC,YAAK;AACd,MAAA,QAAQ,CAAC,MAAT;AACD,KAFS,EAEP,GAFO,CAAV;AAIA;AACD;;AACC,SAAO,QAAP;AACD,CAbH,EAaI,UAAC,KAAD,EAAc;AACd,MAAI,KAAK,CAAC,IAAN,KAAe,cAAnB,EAAmC,CAClC;;AACD,MAAI,KAAK,CAAC,QAAV,EAAoB;AAClB,YAAQ,KAAK,CAAC,QAAN,CAAe,MAAvB;AACE,WAAK,GAAL;AACA,WAAK,GAAL;AACE;;AACF,WAAK,GAAL;AACA,WAAK,GAAL;AACE;AACA;AAPJ;AASD;;AACD,SAAO,OAAO,CAAC,MAAR,CAAe,KAAK,CAAC,QAAN,CAAe,IAA9B,CAAP;AACD,CA5BH;AA8BA,eAAe,KAAf","sourcesContent":["import axios from 'axios'\n\n// axios 配置\naxios.defaults.timeout = 10000\n// http request 设置请求信息\naxios.interceptors.request.use((config:any) => {\n    if (sessionStorage.token && sessionStorage.token !== null) {\n      config.headers.Authorization = sessionStorage.token // `token ${store.state.token}`\n    }\n    return config\n  },(err:any) => {\n    return Promise.reject(err)\n  })\n\n// http response 拦截器\naxios.interceptors.response.use((response:any) => {\n  console.log(response)\n  let res: any = response.data;\n  console.log(res)\n  if(res.data.message && res.data.message.indexOf('重新登录') > -1) {\n    sessionStorage.removeItem(\"userInfo\");\n    setTimeout(() => {\n      location.reload();\n    }, 150)\n    \n    return\n  }\n    return response\n  },(error:any) => {\n    if (error.code === 'ECONNABORTED') {\n    }\n    if (error.response) {\n      switch (error.response.status) {\n        case 401:\n        case 403:\n          break\n        case 500:\n        case 504:\n          // this.$router.push({'path': '/error'})\n          break\n      }\n    }\n    return Promise.reject(error.response.data)\n  })\n\nexport default axios\n"],"sourceRoot":""}]}