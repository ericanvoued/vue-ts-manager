{"remainingRequest":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/babel-loader/lib/index.js!/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/ts-loader/index.js??ref--13-2!/Users/ericchen/Desktop/parttime/xinxin/surface/src/api/axios.ts","dependencies":[{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/src/api/axios.ts","mtime":1564501057586},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/ts-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import axios from 'axios';\nvar baseUrl = '';\n\nif (location.href.indexOf('localhost') > -1) {\n  baseUrl = \"\";\n} else {\n  baseUrl = \"https://zkouge.cc\";\n} // axios 配置\n\n\naxios.defaults.timeout = 60000;\naxios.defaults.baseURL = baseUrl;\naxios.defaults.withCredentials = true; // axios.defaults.crossDomain = true;\n// axios.defaults.headers['Access-Control-Allow-Origin'] = '*';\n// axios.defaults.headers['Access-Control-Allow-Origin'] = 'https://zkouge.cc';\n// axios.defaults.headers['access-control-expose-headers'] = 'Authorization';\n// http request 设置请求信息\n\naxios.interceptors.request.use(function (config) {\n  if (sessionStorage.token && sessionStorage.token !== null) {\n    config.headers.Authorization = sessionStorage.token; // `token ${store.state.token}`\n  }\n\n  return config;\n}, function (err) {\n  return Promise.reject(err);\n}); // http response 拦截器\n\naxios.interceptors.response.use(function (response) {\n  var res = response.data;\n\n  if (res.hasOwnProperty(\"data\") && res.data.hasOwnProperty('message') && res.data.message.indexOf('重新登录') > -1) {\n    sessionStorage.removeItem(\"userInfo\");\n    setTimeout(function () {\n      location.reload();\n    }, 150);\n    return;\n  }\n\n  return response;\n}, function (error) {\n  if (error.code === 'ECONNABORTED') {}\n\n  if (error.response) {\n    switch (error.response.status) {\n      case 401:\n      case 403:\n        break;\n\n      case 500:\n      case 504:\n        // this.$router.push({'path': '/error'})\n        break;\n    }\n  }\n\n  return Promise.reject(error.response.data);\n});\nexport default axios;",{"version":3,"sources":["/Users/ericchen/Desktop/parttime/xinxin/surface/src/api/axios.ts"],"names":[],"mappings":"AAAA,OAAO,KAAP,MAAkB,OAAlB;AAQA,IAAI,OAAO,GAAQ,EAAnB;;AACA,IAAG,QAAQ,CAAC,IAAT,CAAc,OAAd,CAAsB,WAAtB,IAAmC,CAAC,CAAvC,EAA0C;AACxC,EAAA,OAAO,GAAG,EAAV;AACD,CAFD,MAEM;AACJ,EAAA,OAAO,GAAG,mBAAV;AACD,C,CAGD;;;AACA,KAAK,CAAC,QAAN,CAAe,OAAf,GAAyB,KAAzB;AACA,KAAK,CAAC,QAAN,CAAe,OAAf,GAAyB,OAAzB;AACA,KAAK,CAAC,QAAN,CAAe,eAAf,GAAiC,IAAjC,C,CACA;AACA;AACA;AACA;AACA;;AACA,KAAK,CAAC,YAAN,CAAmB,OAAnB,CAA2B,GAA3B,CAA+B,UAAC,MAAD,EAAe;AAC1C,MAAI,cAAc,CAAC,KAAf,IAAwB,cAAc,CAAC,KAAf,KAAyB,IAArD,EAA2D;AACzD,IAAA,MAAM,CAAC,OAAP,CAAe,aAAf,GAA+B,cAAc,CAAC,KAA9C,CADyD,CACL;AACrD;;AACD,SAAO,MAAP;AACD,CALH,EAKI,UAAC,GAAD,EAAY;AACZ,SAAO,OAAO,CAAC,MAAR,CAAe,GAAf,CAAP;AACD,CAPH,E,CASA;;AACA,KAAK,CAAC,YAAN,CAAmB,QAAnB,CAA4B,GAA5B,CAAgC,UAAC,QAAD,EAAiB;AAC/C,MAAI,GAAG,GAAQ,QAAQ,CAAC,IAAxB;;AACA,MAAG,GAAG,CAAC,cAAJ,CAAmB,MAAnB,KAA8B,GAAG,CAAC,IAAJ,CAAS,cAAT,CAAwB,SAAxB,CAA9B,IAAoE,GAAG,CAAC,IAAJ,CAAS,OAAT,CAAiB,OAAjB,CAAyB,MAAzB,IAAmC,CAAC,CAA3G,EAA8G;AAC5G,IAAA,cAAc,CAAC,UAAf,CAA0B,UAA1B;AACA,IAAA,UAAU,CAAC,YAAK;AACd,MAAA,QAAQ,CAAC,MAAT;AACD,KAFS,EAEP,GAFO,CAAV;AAIA;AACD;;AACC,SAAO,QAAP;AACD,CAXH,EAWI,UAAC,KAAD,EAAc;AACd,MAAI,KAAK,CAAC,IAAN,KAAe,cAAnB,EAAmC,CAClC;;AACD,MAAI,KAAK,CAAC,QAAV,EAAoB;AAClB,YAAQ,KAAK,CAAC,QAAN,CAAe,MAAvB;AACE,WAAK,GAAL;AACA,WAAK,GAAL;AACE;;AACF,WAAK,GAAL;AACA,WAAK,GAAL;AACE;AACA;AAPJ;AASD;;AACD,SAAO,OAAO,CAAC,MAAR,CAAe,KAAK,CAAC,QAAN,CAAe,IAA9B,CAAP;AACD,CA1BH;AA4BA,eAAe,KAAf","sourcesContent":["import axios from 'axios'\n\ndeclare global {\n  interface Window {\n    breadKey: any\n  }\n}\n\nlet baseUrl: any = ''\nif(location.href.indexOf('localhost')>-1) {\n  baseUrl = \"\";\n}else {\n  baseUrl = \"https://zkouge.cc\";\n}\n\n\n// axios 配置\naxios.defaults.timeout = 60000\naxios.defaults.baseURL = baseUrl;\naxios.defaults.withCredentials = true;\n// axios.defaults.crossDomain = true;\n// axios.defaults.headers['Access-Control-Allow-Origin'] = '*';\n// axios.defaults.headers['Access-Control-Allow-Origin'] = 'https://zkouge.cc';\n// axios.defaults.headers['access-control-expose-headers'] = 'Authorization';\n// http request 设置请求信息\naxios.interceptors.request.use((config:any) => {\n    if (sessionStorage.token && sessionStorage.token !== null) {\n      config.headers.Authorization = sessionStorage.token // `token ${store.state.token}`\n    }\n    return config\n  },(err:any) => {\n    return Promise.reject(err)\n  })\n\n// http response 拦截器\naxios.interceptors.response.use((response:any) => {\n  let res: any = response.data;\n  if(res.hasOwnProperty(\"data\") && res.data.hasOwnProperty('message') && res.data.message.indexOf('重新登录') > -1) {\n    sessionStorage.removeItem(\"userInfo\");\n    setTimeout(() => {\n      location.reload();\n    }, 150)\n    \n    return\n  }\n    return response\n  },(error:any) => {\n    if (error.code === 'ECONNABORTED') {\n    }\n    if (error.response) {\n      switch (error.response.status) {\n        case 401:\n        case 403:\n          break\n        case 500:\n        case 504:\n          // this.$router.push({'path': '/error'})\n          break\n      }\n    }\n    return Promise.reject(error.response.data)\n  })\n\nexport default axios\n"],"sourceRoot":""}]}