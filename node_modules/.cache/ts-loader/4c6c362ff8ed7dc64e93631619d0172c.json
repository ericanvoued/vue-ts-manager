{"remainingRequest":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/babel-loader/lib/index.js!/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/ts-loader/index.js??ref--13-2!/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ericchen/Desktop/parttime/xinxin/surface/src/components/team-home/home-tab-content.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/src/components/team-home/home-tab-content.vue","mtime":1575480545874},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.function.name\";\nimport _classCallCheck from \"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/@babel/runtime-corejs2/helpers/esm/inherits\";\nimport * as tslib_1 from \"tslib\";\nimport { Component, Vue, Watch } from \"vue-property-decorator\";\nimport { State } from \"vuex-class\";\nimport BreadNav from \"../common/bread-nav.vue\";\nimport HomeFormList from \"./home-form-list.vue\";\nimport HomeTable from \"./home-table.vue\";\nimport Pigination from \"../common/pagination.vue\";\nimport { ApiList } from \"../../api/api\";\n\nvar HomeTabContent =\n/*#__PURE__*/\nfunction (_Vue) {\n  _inherits(HomeTabContent, _Vue);\n\n  function HomeTabContent() {\n    var _this;\n\n    _classCallCheck(this, HomeTabContent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(HomeTabContent).apply(this, arguments));\n    _this.hasConfig = false;\n    _this.baseUrl = window.location.origin;\n    _this.downloadUrl = '';\n    _this.user = JSON.parse(sessionStorage.getItem(\"userInfo\"));\n    return _this;\n  }\n\n  _createClass(HomeTabContent, [{\n    key: \"created\",\n    value: function created() {\n      this.downloadUrl = this.downApiUrl + '';\n      this.initConfig();\n      this.initDownloadEcel();\n    }\n  }, {\n    key: \"watchFormList\",\n    value: function watchFormList(newVal, oldVal) {\n      this.downloadUrl = this.downApiUrl + '';\n      this.initDownloadEcel();\n    }\n  }, {\n    key: \"initConfig\",\n    value: function initConfig() {\n      this.hasConfig = this.HomeModule.formParams.hasOwnProperty(\"config\");\n    } //下载导出\n\n  }, {\n    key: \"initDownloadEcel\",\n    value: function initDownloadEcel() {\n      var _this2 = this;\n\n      var obj = {};\n      this.$set(obj, \"userid\", this.user.id);\n      var url = this.downloadUrl;\n      this.HomeModule.formParams.config.formList.map(function (item, index) {\n        if (item.type == 'select') {\n          _this2.$set(obj, item.name, item.value.value);\n        }\n\n        if (item.type == 'text') {\n          _this2.$set(obj, item.name, item.value);\n        }\n\n        if (item.type == 'date') {\n          _this2.$set(obj, item.name[0], _this2.formatDate(item.value[0]));\n\n          _this2.$set(obj, item.name[1], _this2.formatDate(item.value[1]));\n        }\n      });\n      Object.keys(obj).map(function (item) {\n        _this2.downloadUrl += item + \"=\" + obj[item] + \"&\";\n      });\n      this.downloadUrl = this.downloadUrl.slice(0, this.downloadUrl.length - 1);\n    }\n  }, {\n    key: \"createdDownload\",\n    value: function createdDownload(href) {\n      var api = new ApiList();\n      api.getblobData(href).then(function (data) {\n        console.log(data.data, new Blob([data.data]));\n        var url = window.URL.createObjectURL(new Blob([data.data], {\n          type: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"\n        }));\n        window.open(url); // var a = document.createElement('a');\n        // a.setAttribute('href', data.data);\n        // a.setAttribute('id', 'startTelMedicine');\n        // // 防止反复添加\n        // if(document.getElementById('startTelMedicine')) {\n        //     document.body.removeChild((<any>document.getElementById('startTelMedicine')));\n        // }\n        // document.body.appendChild(a);\n        // a.click();\n      }); // window.open(href)\n      // var a = document.createElement('a');\n      // a.setAttribute('href', href);\n      // a.setAttribute('id', 'startTelMedicine');\n      // // 防止反复添加\n      // if(document.getElementById('startTelMedicine')) {\n      //     document.body.removeChild((<any>document.getElementById('startTelMedicine')));\n      // }\n      // document.body.appendChild(a);\n      // a.click();\n    }\n  }, {\n    key: \"formatDate\",\n    value: function formatDate(date) {\n      date = new Date(date);\n      var y = date.getFullYear();\n      var m = date.getMonth() + 1;\n      var d = date.getDate();\n      m = m < 10 ? \"0\" + m : m;\n      d = d < 10 ? \"0\" + d : d;\n      return y + \"-\" + m + \"-\" + d;\n    }\n  }]);\n\n  return HomeTabContent;\n}(Vue);\n\ntslib_1.__decorate([State(\"HomeModule\")], HomeTabContent.prototype, \"HomeModule\", void 0);\n\ntslib_1.__decorate([State(function (state) {\n  return state.HomeModule.formParams.keyMap.optConfig.downloadFlag;\n})], HomeTabContent.prototype, \"downloadFlag\", void 0);\n\ntslib_1.__decorate([State(function (state) {\n  return state.HomeModule.formParams.keyMap.optConfig.downApiUrl;\n})], HomeTabContent.prototype, \"downApiUrl\", void 0);\n\ntslib_1.__decorate([Watch(\"HomeModule.formParams.config.formList\", {\n  deep: true\n})], HomeTabContent.prototype, \"watchFormList\", null);\n\nHomeTabContent = tslib_1.__decorate([Component({\n  components: {\n    BreadNav: BreadNav,\n    HomeFormList: HomeFormList,\n    HomeTable: HomeTable,\n    Pigination: Pigination\n  }\n})], HomeTabContent);\nexport default HomeTabContent;",{"version":3,"sources":["/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ericchen/Desktop/parttime/xinxin/surface/src/components/team-home/home-tab-content.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Watch } from \"vue-property-decorator\";\nimport { State } from \"vuex-class\";\nimport BreadNav from \"../common/bread-nav.vue\";\nimport HomeFormList from \"./home-form-list.vue\";\nimport HomeTable from \"./home-table.vue\";\nimport Pigination from \"../common/pagination.vue\";\nimport { ApiList } from '../../api/api';\n\n@Component({\n    components: {\n        BreadNav,\n        HomeFormList,\n        HomeTable,\n        Pigination\n    }\n})\nexport default class HomeTabContent extends Vue {\n    @State(\"HomeModule\") private HomeModule!: any;\n    @State(state => state.HomeModule.formParams.keyMap.optConfig.downloadFlag)\n    private downloadFlag!: any;\n    @State(state => state.HomeModule.formParams.keyMap.optConfig.downApiUrl)\n    private downApiUrl!: any;\n\n    private hasConfig: any = false;\n    private baseUrl: string = window.location.origin;\n    private downloadUrl: string = '';\n    private user: any = JSON.parse(<any>sessionStorage.getItem(\"userInfo\"));\n\n    created() {\n        this.downloadUrl = this.downApiUrl + '';\n        this.initConfig();\n        this.initDownloadEcel();\n    }\n\n    @Watch(\"HomeModule.formParams.config.formList\", {deep: true})\n    watchFormList(newVal: any, oldVal: any) {\n         this.downloadUrl = this.downApiUrl + '';\n        this.initDownloadEcel();\n    }\n\n    initConfig() {\n        this.hasConfig = this.HomeModule.formParams.hasOwnProperty(\"config\");\n    }\n\n    //下载导出\n    initDownloadEcel() {\n        \n        let obj: any = {};\n        this.$set(obj, \"userid\", this.user.id);\n        let url: string = this.downloadUrl;\n        this.HomeModule.formParams.config.formList.map((item: any, index: any) => {\n            if(item.type == 'select') {\n                this.$set(obj, item.name, item.value.value)\n            }\n            if(item.type == 'text') {\n                this.$set(obj, item.name, item.value)\n            }\n            if(item.type == 'date') {\n                this.$set(obj, item.name[0], this.formatDate(item.value[0]))\n                this.$set(obj, item.name[1], this.formatDate(item.value[1]))\n            }\n        })\n        \n        Object.keys(obj).map((item: any) => {\n            this.downloadUrl += item + \"=\" + obj[item] + \"&\";\n        });\n\n        this.downloadUrl = this.downloadUrl.slice(0, this.downloadUrl.length - 1);\n\n    }\n\n    createdDownload(href: any) {\n        let api: any = new ApiList();\n        api.getblobData(href).then((data: any) => {\n            console.log(data.data,new Blob([data.data]))\n            \n            let url: any = window.URL.createObjectURL(\n                new Blob([data.data], {\n                    type: \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"\n                })\n            );\n\n            window.open(url)\n\n            // var a = document.createElement('a');\n            // a.setAttribute('href', data.data);\n            // a.setAttribute('id', 'startTelMedicine');\n            // // 防止反复添加\n            // if(document.getElementById('startTelMedicine')) {\n            //     document.body.removeChild((<any>document.getElementById('startTelMedicine')));\n            // }\n            // document.body.appendChild(a);\n            // a.click();\n\n        })\n\n        // window.open(href)\n        // var a = document.createElement('a');\n        // a.setAttribute('href', href);\n        // a.setAttribute('id', 'startTelMedicine');\n        // // 防止反复添加\n        // if(document.getElementById('startTelMedicine')) {\n        //     document.body.removeChild((<any>document.getElementById('startTelMedicine')));\n        // }\n        // document.body.appendChild(a);\n        // a.click();\n    }\n\n    formatDate(date: any){\n        date = new Date(date);\n        var y=date.getFullYear();\n        var m=date.getMonth()+1;\n        var d=date.getDate();\n        m = m<10?(\"0\"+m):m;\n        d = d<10?(\"0\"+d):d;\n        return y+\"-\"+m+\"-\"+d;\n    }\n}\n"],"sourceRoot":""}]}