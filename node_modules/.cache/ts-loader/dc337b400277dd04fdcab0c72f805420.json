{"remainingRequest":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/thread-loader/dist/cjs.js!/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/babel-loader/lib/index.js!/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/ts-loader/index.js??ref--13-3!/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ericchen/Desktop/parttime/xinxin/surface/src/views/login.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/src/views/login.vue","mtime":1564495318063},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.fill\";\nimport _classCallCheck from \"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/@babel/runtime-corejs2/helpers/esm/inherits\";\nimport * as tslib_1 from \"tslib\";\nimport { Component, Vue } from \"vue-property-decorator\";\nimport { Mutation } from 'vuex-class';\nimport { ApiList } from \"../api/api\";\nimport { Md5 } from 'ts-md5';\n\nvar LoginPage =\n/*#__PURE__*/\nfunction (_Vue) {\n  _inherits(LoginPage, _Vue);\n\n  function LoginPage() {\n    var _this;\n\n    _classCallCheck(this, LoginPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LoginPage).apply(this, arguments));\n    _this.username = \"\";\n    _this.password = \"\";\n    _this.checkcode = \"\";\n    _this.fullscreenLoading = false;\n    _this.identifyCodes = \"1234567890\";\n    _this.identifyCode = \"1234\";\n    _this.fontSizeMin = 30;\n    _this.fontSizeMax = 40;\n    _this.backgroundColorMin = 180;\n    _this.backgroundColorMax = 240;\n    _this.colorMin = 50;\n    _this.colorMax = 160;\n    _this.lineColorMin = 40;\n    _this.lineColorMax = 180;\n    _this.dotColorMin = 0;\n    _this.dotColorMax = 255;\n    _this.contentWidth = 140;\n    _this.contentHeight = 55;\n    _this.apiList = new ApiList();\n    return _this;\n  }\n\n  _createClass(LoginPage, [{\n    key: \"mounted\",\n    value: function mounted() {\n      this.refreshCode(); // document.addEventListener('keydown', (e: any) => {\n      //   if(e.keyCode == 13) {\n      //     this.submitLogin();\n      //   }\n      // })\n    }\n  }, {\n    key: \"submitLogin\",\n    value: function submitLogin() {\n      var _this2 = this;\n\n      if (this.username.length == 0) {\n        this.$message.error(\"请输入用户名\");\n        return;\n      }\n\n      if (this.username.length >= 15) {\n        this.$message.error(\"用户名太长啦\");\n        return;\n      }\n\n      if (this.password.length == 0) {\n        this.$message.error(\"请输入密码\");\n        return;\n      }\n\n      if (this.password.length > 16 || this.password.length < 6) {\n        this.$message.error(\"请输入6到16位的密码\");\n        return;\n      }\n\n      if (this.checkcode.length == 0) {\n        this.$message.error(\"请输入验证码\");\n        return;\n      }\n\n      if (this.checkcode != this.identifyCode) {\n        this.$message.error(\"请输入正确的验证码\");\n        this.refreshCode();\n        return;\n      }\n\n      this.fullscreenLoading = true;\n      this.apiList.login({\n        username: this.username,\n        password: Md5.hashStr(this.password + ''),\n        code: this.checkcode\n      }).then(function (data) {\n        _this2.fullscreenLoading = false;\n\n        if (data.data.code == 1) {\n          _this2.set_userInfo(data.data.data);\n\n          sessionStorage.setItem(\"userInfo\", JSON.stringify(data.data.data));\n\n          _this2.$router.push({\n            path: '/home'\n          });\n        }\n\n        if (data.data.code == 0) {\n          _this2.$message.error(data.data.data.message);\n        }\n\n        _this2.refreshCode();\n      }, function (error) {\n        _this2.fullscreenLoading = false;\n\n        _this2.refreshCode();\n\n        throw error;\n      }).catch(function (error) {\n        _this2.fullscreenLoading = false;\n\n        _this2.refreshCode();\n\n        _this2.$message.error(error);\n      });\n    }\n  }, {\n    key: \"refreshCode\",\n    value: function refreshCode() {\n      this.identifyCode = \"\";\n      this.makeCode(this.identifyCodes, 4);\n    }\n  }, {\n    key: \"makeCode\",\n    value: function makeCode(o, l) {\n      for (var i = 0; i < l; i++) {\n        this.identifyCode += this.identifyCodes[this.randomNum(0, this.identifyCodes.length)];\n      }\n\n      this.drawPic();\n    } // 生成一个随机数\n\n  }, {\n    key: \"randomNum\",\n    value: function randomNum(min, max) {\n      return Math.floor(Math.random() * (max - min) + min);\n    } // 生成一个随机的颜色\n\n  }, {\n    key: \"randomColor\",\n    value: function randomColor(min, max) {\n      var r = this.randomNum(min, max);\n      var g = this.randomNum(min, max);\n      var b = this.randomNum(min, max);\n      return \"rgb(\" + r + \",\" + g + \",\" + b + \")\";\n    }\n  }, {\n    key: \"drawPic\",\n    value: function drawPic() {\n      var canvas = document.getElementById(\"checkcodeCanvas\");\n      canvas.width = 140;\n      canvas.height = 55;\n      var ctx = canvas.getContext(\"2d\");\n      ctx.textBaseline = \"bottom\"; // 绘制背景\n\n      ctx.fillStyle = this.randomColor(this.backgroundColorMin, this.backgroundColorMax);\n      ctx.fillRect(0, 0, this.contentWidth, this.contentHeight); // 绘制文字\n\n      for (var i = 0; i < this.identifyCode.length; i++) {\n        this.drawText(ctx, this.identifyCode[i], i);\n      }\n\n      this.drawLine(ctx);\n      this.drawDot(ctx);\n    }\n  }, {\n    key: \"drawText\",\n    value: function drawText(ctx, txt, i) {\n      ctx.fillStyle = this.randomColor(this.colorMin, this.colorMax);\n      ctx.font = this.randomNum(this.fontSizeMin, this.fontSizeMax) + \"px SimHei\";\n      var x = (i + 1) * (this.contentWidth / (this.identifyCode.length + 1));\n      var y = this.randomNum(this.fontSizeMax, this.contentHeight - 5);\n      var deg = this.randomNum(-45, 45); // 修改坐标原点和旋转角度\n\n      ctx.translate(x, y);\n      ctx.rotate(deg * Math.PI / 180);\n      ctx.fillText(txt, 0, 0); // 恢复坐标原点和旋转角度\n\n      ctx.rotate(-deg * Math.PI / 180);\n      ctx.translate(-x, -y);\n    }\n  }, {\n    key: \"drawLine\",\n    value: function drawLine(ctx) {\n      // 绘制干扰线\n      for (var i = 0; i < 8; i++) {\n        ctx.strokeStyle = this.randomColor(this.lineColorMin, this.lineColorMax);\n        ctx.beginPath();\n        ctx.moveTo(this.randomNum(0, this.contentWidth), this.randomNum(0, this.contentHeight));\n        ctx.lineTo(this.randomNum(0, this.contentWidth), this.randomNum(0, this.contentHeight));\n        ctx.stroke();\n      }\n    }\n  }, {\n    key: \"drawDot\",\n    value: function drawDot(ctx) {\n      // 绘制干扰点\n      for (var i = 0; i < 100; i++) {\n        ctx.fillStyle = this.randomColor(0, 255);\n        ctx.beginPath();\n        ctx.arc(this.randomNum(0, this.contentWidth), this.randomNum(0, this.contentHeight), 1, 0, 2 * Math.PI);\n        ctx.fill();\n      }\n    }\n  }]);\n\n  return LoginPage;\n}(Vue);\n\ntslib_1.__decorate([Mutation(\"set_userInfo\")], LoginPage.prototype, \"set_userInfo\", void 0);\n\nLoginPage = tslib_1.__decorate([Component], LoginPage);\nexport default LoginPage;",{"version":3,"sources":["/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ericchen/Desktop/parttime/xinxin/surface/src/views/login.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\nimport { State, Mutation } from 'vuex-class';\nimport { ApiList } from '../api/api';\nimport { Md5 } from 'ts-md5';\n\n@Component\nexport default class LoginPage extends Vue {\n  @Mutation(\"set_userInfo\") private set_userInfo: any;\n  private username: String = \"\";\n  private password: String = \"\";\n  private checkcode: String = \"\";\n  private fullscreenLoading:any =  false\n  private identifyCodes: any = \"1234567890\";\n  private identifyCode: any = \"1234\";\n  private fontSizeMin: any = 30;\n  private fontSizeMax: any = 40;\n  private backgroundColorMin: any = 180;\n  private backgroundColorMax: any = 240;\n  private colorMin: any = 50;\n  private colorMax: any = 160;\n  private lineColorMin: any = 40;\n  private lineColorMax: any = 180;\n  private dotColorMin: any = 0;\n  private dotColorMax: any = 255;\n  private contentWidth: any = 140;\n  private contentHeight: any = 55;\n  private apiList = new ApiList();\n  mounted() {\n    this.refreshCode();\n    // document.addEventListener('keydown', (e: any) => {\n    //   if(e.keyCode == 13) {\n    //     this.submitLogin();\n    //   }\n    // })\n  }\n  submitLogin() {\n    if (this.username.length == 0) {\n      this.$message.error(\"请输入用户名\");\n      return;\n    }\n    if (this.username.length >= 15) {\n      this.$message.error(\"用户名太长啦\");\n      return;\n    }\n    if (this.password.length == 0) {\n      this.$message.error(\"请输入密码\");\n      return;\n    }\n    if (this.password.length > 16 || this.password.length < 6) {\n      this.$message.error(\"请输入6到16位的密码\");\n      return;\n    }\n    if (this.checkcode.length == 0) {\n      this.$message.error(\"请输入验证码\");\n      return;\n    }\n    if (this.checkcode != this.identifyCode) {\n      this.$message.error(\"请输入正确的验证码\");\n      this.refreshCode();\n      return;\n    }\n    this.fullscreenLoading = true;\n    this.apiList.login({\n      username: this.username,\n      password: Md5.hashStr(this.password + ''),\n      code: this.checkcode\n    }).then((data: any) => {\n      this.fullscreenLoading = false;\n      if(data.data.code == 1) {\n        this.set_userInfo(data.data.data)\n        sessionStorage.setItem(\"userInfo\", JSON.stringify(data.data.data));\n        this.$router.push({path: '/home'})\n      }\n      if(data.data.code == 0) {\n        this.$message.error(data.data.data.message);\n      }\n      this.refreshCode();\n    },(error: any) => {\n      this.fullscreenLoading = false;\n      this.refreshCode();\n      throw error;\n    }).catch((error: any) => {\n      this.fullscreenLoading = false;\n      this.refreshCode();\n      this.$message.error(error)\n    })\n\n  }\n  refreshCode() {\n    this.identifyCode = \"\";\n    this.makeCode(this.identifyCodes, 4);\n  }\n  makeCode(o: any, l: any) {\n    for (let i: any = 0; i < l; i++) {\n      this.identifyCode += this.identifyCodes[\n        this.randomNum(0, this.identifyCodes.length)\n      ];\n    }\n    this.drawPic();\n  }\n  // 生成一个随机数\n  randomNum(min: any, max: any) {\n    return Math.floor(Math.random() * (max - min) + min);\n  }\n  // 生成一个随机的颜色\n  randomColor(min: any, max: any) {\n    let r: any = this.randomNum(min, max);\n    let g: any = this.randomNum(min, max);\n    let b: any = this.randomNum(min, max);\n    return \"rgb(\" + r + \",\" + g + \",\" + b + \")\";\n  }\n  drawPic() {\n    let canvas: any = document.getElementById(\"checkcodeCanvas\");\n    canvas.width = 140;\n    canvas.height = 55;\n    let ctx: any = canvas.getContext(\"2d\");\n    ctx.textBaseline = \"bottom\";\n    // 绘制背景\n    ctx.fillStyle = this.randomColor(\n      this.backgroundColorMin,\n      this.backgroundColorMax\n    );\n    ctx.fillRect(0, 0, this.contentWidth, this.contentHeight);\n    // 绘制文字\n    for (let i: any = 0; i < this.identifyCode.length; i++) {\n      this.drawText(ctx, this.identifyCode[i], i);\n    }\n    this.drawLine(ctx);\n    this.drawDot(ctx);\n  }\n  drawText(ctx: any, txt: any, i: any) {\n    ctx.fillStyle = this.randomColor(this.colorMin, this.colorMax);\n    ctx.font = this.randomNum(this.fontSizeMin, this.fontSizeMax) + \"px SimHei\";\n    let x: any = (i + 1) * (this.contentWidth / (this.identifyCode.length + 1));\n    let y: any = this.randomNum(this.fontSizeMax, this.contentHeight - 5);\n    let deg: any = this.randomNum(-45, 45);\n    // 修改坐标原点和旋转角度\n    ctx.translate(x, y);\n    ctx.rotate((deg * Math.PI) / 180);\n    ctx.fillText(txt, 0, 0);\n    // 恢复坐标原点和旋转角度\n    ctx.rotate((-deg * Math.PI) / 180);\n    ctx.translate(-x, -y);\n  }\n  drawLine(ctx: any) {\n    // 绘制干扰线\n    for (let i: any = 0; i < 8; i++) {\n      ctx.strokeStyle = this.randomColor(this.lineColorMin, this.lineColorMax);\n      ctx.beginPath();\n      ctx.moveTo(\n        this.randomNum(0, this.contentWidth),\n        this.randomNum(0, this.contentHeight)\n      );\n      ctx.lineTo(\n        this.randomNum(0, this.contentWidth),\n        this.randomNum(0, this.contentHeight)\n      );\n      ctx.stroke();\n    }\n  }\n  drawDot(ctx: any) {\n    // 绘制干扰点\n    for (let i: any = 0; i < 100; i++) {\n      ctx.fillStyle = this.randomColor(0, 255);\n      ctx.beginPath();\n      ctx.arc(\n        this.randomNum(0, this.contentWidth),\n        this.randomNum(0, this.contentHeight),\n        1,\n        0,\n        2 * Math.PI\n      );\n      ctx.fill();\n    }\n  }\n}\n"],"sourceRoot":""}]}