{"remainingRequest":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/babel-loader/lib/index.js!/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/ts-loader/index.js??ref--13-2!/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ericchen/Desktop/parttime/xinxin/surface/src/components/common/base-menu.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/src/components/common/base-menu.vue","mtime":1575308232246},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.function.name\";\nimport _defineProperty from \"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/@babel/runtime-corejs2/helpers/esm/inherits\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { keys.push.apply(keys, Object.getOwnPropertySymbols(object)); } if (enumerableOnly) keys = keys.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport * as tslib_1 from \"tslib\";\nimport { Component, Vue, Watch } from \"vue-property-decorator\";\nimport { State, Mutation, Action } from \"vuex-class\";\nimport menuList from \"../../config/menu-config\";\n\nvar BaseMenu =\n/*#__PURE__*/\nfunction (_Vue) {\n  _inherits(BaseMenu, _Vue);\n\n  function BaseMenu() {\n    var _this;\n\n    _classCallCheck(this, BaseMenu);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(BaseMenu).apply(this, arguments));\n    _this.isCollapse = false;\n    _this.menuList = menuList;\n    return _this;\n  }\n\n  _createClass(BaseMenu, [{\n    key: \"created\",\n    value: function created() {\n      var _this2 = this;\n\n      this.$nextTick(function () {\n        _this2.initForm();\n      });\n    }\n  }, {\n    key: \"isAdmin\",\n    value: function isAdmin() {\n      var userStr = sessionStorage.getItem(\"userInfo\");\n      var user = JSON.parse(userStr);\n\n      if (user.username.indexOf(\"admin\") > -1) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }, {\n    key: \"initTab\",\n    value: function initTab() {\n      if (this.$route.fullPath == \"/home\") {\n        this.set_activeTabIndex('1-1');\n\n        if (this.menuList[0].children) {\n          this.add_editableTabs(_objectSpread({}, this.menuList[0].children[0], {\n            url: this.menuList[0].children[0].baserouteurl\n          }));\n        } else {\n          this.add_editableTabs({\n            url: this.menuList[0].children[0].baserouteurl\n          });\n        }\n\n        this.$router.push(this.menuList[0].children[0].baserouteurl);\n      } else {\n        this.initMenu();\n      }\n    }\n  }, {\n    key: \"initMenu\",\n    value: function initMenu() {\n      var _this3 = this;\n\n      var activeMenu = '';\n      this.menuList.map(function (item, index) {\n        item.children.map(function (child, cIndex) {\n          if (child.baserouteurl == _this3.$route.fullPath) {\n            activeMenu = index + 1 + \"-\" + (cIndex + 1);\n\n            _this3.set_activeTabIndex(activeMenu);\n\n            _this3.add_editableTabs(_objectSpread({}, child, {\n              activeMenu: activeMenu,\n              url: child.baserouteurl\n            }));\n          }\n        });\n      });\n    }\n  }, {\n    key: \"watchMenu\",\n    value: function watchMenu(newVal, oldVal) {\n      if (newVal != oldVal && newVal.hasOwnProperty(\"config\") && newVal.config.formList && newVal.config.formList.length) {\n        this.searchList();\n      }\n    }\n  }, {\n    key: \"searchList\",\n    value: function searchList() {\n      var _this4 = this;\n\n      var obj = {};\n      this.HomeModule.formParams.config.formList.map(function (item, index) {\n        if (item.type == \"select\") {\n          _this4.$set(obj, item.name, item.value.value);\n        }\n\n        if (item.type == \"text\") {\n          _this4.$set(obj, item.name, item.value);\n        }\n\n        if (item.type == \"date\") {\n          _this4.$set(obj, item.name[0], _this4.formatDate(item.value[0]));\n\n          _this4.$set(obj, item.name[1], _this4.formatDate(item.value[1]));\n        }\n      });\n      this.getTableList({\n        url: this.HomeModule.formParams.config.apiurl,\n        params: obj\n      });\n    }\n  }, {\n    key: \"formatDate\",\n    value: function formatDate(date) {\n      date = new Date(date);\n      var y = date.getFullYear();\n      var m = date.getMonth() + 1;\n      var d = date.getDate();\n      m = m < 10 ? \"0\" + m : m;\n      d = d < 10 ? \"0\" + d : d;\n      return y + \"-\" + m + \"-\" + d;\n    }\n  }, {\n    key: \"initForm\",\n    value: function initForm() {\n      var _this5 = this;\n\n      this.initTab();\n      this.HomeModule.editableTabs2.map(function (item) {\n        if (item.name == _this5.HomeModule.editableTabsValue2) {\n          _this5.set_formParams(item);\n        }\n      });\n    }\n  }, {\n    key: \"handleOpen\",\n    value: function handleOpen(key, keyPath) {\n      console.log(key, keyPath);\n    }\n  }, {\n    key: \"handleSelect\",\n    value: function handleSelect(key, keyPath) {\n      var _this6 = this;\n\n      console.log(key, keyPath);\n      var pIndex = key[0] - 1;\n      var rIndex = key[2] - 1;\n\n      if (this.menuList[pIndex].children[rIndex].baserouteurl == this.$route.fullPath) {\n        return;\n      }\n\n      var tabExitFlag = false;\n      this.HomeModule.editableTabs2.map(function (cItem, Cindex) {\n        if (cItem.baserouteurl == _this6.menuList[pIndex].children[rIndex].baserouteurl) {\n          tabExitFlag = true;\n\n          _this6.set_editableTabsValue2(cItem.name + \"\");\n        }\n      });\n\n      if (!tabExitFlag) {\n        this.set_activeTabIndex(key);\n        this.add_editableTabs(_objectSpread({}, this.menuList[pIndex].children[rIndex], {\n          activeMenu: key,\n          url: this.menuList[pIndex].children[rIndex].baserouteurl\n        }));\n      }\n\n      this.set_formParams(_objectSpread({}, this.menuList[pIndex].children[rIndex], {\n        url: this.menuList[pIndex].children[rIndex].baserouteurl\n      }));\n      this.$router.push({\n        path: this.menuList[pIndex].children[rIndex].baserouteurl\n      });\n    }\n  }, {\n    key: \"handleClose\",\n    value: function handleClose(key, keyPath) {} // console.log(key, keyPath);\n\n    /**\n     * 点击方法暂时被 handleSelect 替换\n     * 2019-11-29 eric\n     */\n\n  }, {\n    key: \"addTabList\",\n    value: function addTabList(item, child) {\n      if (child.baserouteurl == this.$route.fullPath) {\n        return;\n      } // let tabExitFlag: boolean = false;\n      // this.HomeModule.editableTabs2.map((cItem: any, Cindex: number) => {\n      //   if(child.title == cItem.title) {\n      // this.set_editableTabsValue2(cItem.name + \"\")\n      // tabExitFlag = true;\n      // }\n      // })\n      // if(!tabExitFlag) {\n      //   this.add_editableTabs({\n      //     ...child,\n      //     url: child.baserouteurl\n      //   });\n      // }\n      // this.set_formParams({\n      //   ...child,\n      //   url: child.baserouteurl\n      // });\n      // this.$router.push({ path: child.baserouteurl });\n\n    }\n  }]);\n\n  return BaseMenu;\n}(Vue);\n\ntslib_1.__decorate([State(\"HomeModule\")], BaseMenu.prototype, \"HomeModule\", void 0);\n\ntslib_1.__decorate([Mutation(\"add_editableTabs\")], BaseMenu.prototype, \"add_editableTabs\", void 0);\n\ntslib_1.__decorate([Mutation(\"set_formParams\")], BaseMenu.prototype, \"set_formParams\", void 0);\n\ntslib_1.__decorate([Mutation(\"set_activeTabIndex\")], BaseMenu.prototype, \"set_activeTabIndex\", void 0);\n\ntslib_1.__decorate([Mutation(\"set_editableTabsValue2\")], BaseMenu.prototype, \"set_editableTabsValue2\", void 0);\n\ntslib_1.__decorate([Action(\"getTableList\")], BaseMenu.prototype, \"getTableList\", void 0);\n\ntslib_1.__decorate([Watch(\"HomeModule.formParams\")], BaseMenu.prototype, \"watchMenu\", null);\n\nBaseMenu = tslib_1.__decorate([Component({\n  components: {}\n})], BaseMenu);\nexport default BaseMenu;",{"version":3,"sources":["/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ericchen/Desktop/parttime/xinxin/surface/src/components/common/base-menu.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Watch } from \"vue-property-decorator\";\nimport { State, Mutation, Action } from \"vuex-class\";\nimport menuList from \"../../config/menu-config\";\nimport HomeModule from \"../../store/module/home/home-module\";\n\n@Component({\n  components: {}\n})\nexport default class BaseMenu extends Vue {\n  @State(\"HomeModule\") private HomeModule!: any;\n  @Mutation(\"add_editableTabs\") private add_editableTabs: any;\n  @Mutation(\"set_formParams\") private set_formParams: any;\n  @Mutation(\"set_activeTabIndex\") private set_activeTabIndex: any;\n  @Mutation(\"set_editableTabsValue2\") private set_editableTabsValue2: any;\n  @Action(\"getTableList\") private getTableList: any;\n  private isCollapse: Boolean = false;\n  private menuList: any = menuList;\n\n  created() {\n    this.$nextTick(() => {\n      this.initForm();\n    })\n  }\n  isAdmin() {\n    let userStr: any = sessionStorage.getItem(\"userInfo\");\n    let user: any = JSON.parse(userStr);\n    if (user.username.indexOf(\"admin\") > -1) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  initTab() {\n    if (this.$route.fullPath == \"/home\") {\n      this.set_activeTabIndex('1-1')\n      if (this.menuList[0].children) {\n        this.add_editableTabs({\n          ...this.menuList[0].children[0],\n          url: this.menuList[0].children[0].baserouteurl\n        });\n      } else {\n        this.add_editableTabs({\n          url: this.menuList[0].children[0].baserouteurl\n        });\n      }\n      this.$router.push(this.menuList[0].children[0].baserouteurl);\n    } else {\n      this.initMenu();\n    }\n  }\n\n  initMenu() {\n    let activeMenu: any = '';\n    this.menuList.map((item: any, index: number) => {\n      item.children.map((child: any, cIndex: number) => {\n        if (child.baserouteurl == this.$route.fullPath) {\n          activeMenu = (index +1) + \"-\" + (cIndex + 1);\n          this.set_activeTabIndex(activeMenu)\n          this.add_editableTabs({\n            ...child,\n            activeMenu: activeMenu,\n            url: child.baserouteurl\n          });\n        }\n      });\n    });\n  }\n\n  @Watch(\"HomeModule.formParams\")\n  watchMenu(newVal: any, oldVal: any) {\n    if (\n      newVal != oldVal &&\n      newVal.hasOwnProperty(\"config\") &&\n      newVal.config.formList &&\n      newVal.config.formList.length\n    ) {\n      this.searchList();\n    }\n  }\n\n  searchList() {\n    let obj: any = {};\n    this.HomeModule.formParams.config.formList.map((item: any, index: any) => {\n      if (item.type == \"select\") {\n        this.$set(obj, item.name, item.value.value);\n      }\n      if (item.type == \"text\") {\n        this.$set(obj, item.name, item.value);\n      }\n      if (item.type == \"date\") {\n        this.$set(obj, item.name[0], this.formatDate(item.value[0]));\n        this.$set(obj, item.name[1], this.formatDate(item.value[1]));\n      }\n    });\n    this.getTableList({\n      url: this.HomeModule.formParams.config.apiurl,\n      params: obj\n    });\n  }\n\n  formatDate(date: any) {\n    date = new Date(date);\n    var y = date.getFullYear();\n    var m = date.getMonth() + 1;\n    var d = date.getDate();\n    m = m < 10 ? \"0\" + m : m;\n    d = d < 10 ? \"0\" + d : d;\n    return y + \"-\" + m + \"-\" + d;\n  }\n\n  initForm() {\n    this.initTab();\n    this.HomeModule.editableTabs2.map((item: any) => {\n      if (item.name == this.HomeModule.editableTabsValue2) {\n        this.set_formParams(item);\n      }\n    });\n  }\n  handleOpen(key: any, keyPath: any) {\n    console.log(key, keyPath);\n  }\n\n  handleSelect(key: any, keyPath: any) {\n    console.log(key, keyPath);\n    let pIndex = key[0] - 1;\n    let rIndex = key[2] - 1;\n    if(this.menuList[pIndex].children[rIndex].baserouteurl == this.$route.fullPath) {\n      return;\n    }\n\n    let tabExitFlag: boolean = false;\n    this.HomeModule.editableTabs2.map((cItem: any, Cindex: number) => {\n      if(cItem.baserouteurl == this.menuList[pIndex].children[rIndex].baserouteurl) {\n        tabExitFlag = true;\n        this.set_editableTabsValue2(cItem.name + \"\")\n      }\n    })\n\n    if(!tabExitFlag) {\n      this.set_activeTabIndex(key)\n      this.add_editableTabs({\n        ...this.menuList[pIndex].children[rIndex],\n        activeMenu: key,\n        url: this.menuList[pIndex].children[rIndex].baserouteurl\n      });\n    }\n\n    this.set_formParams({\n      ...this.menuList[pIndex].children[rIndex],\n      url: this.menuList[pIndex].children[rIndex].baserouteurl\n    });\n    this.$router.push({ path: this.menuList[pIndex].children[rIndex].baserouteurl });\n  }\n\n  handleClose(key: any, keyPath: any) {\n    // console.log(key, keyPath);\n    \n  }\n\n  /**\n   * 点击方法暂时被 handleSelect 替换\n   * 2019-11-29 eric\n   */\n  addTabList(item: any, child: any) {\n    if(child.baserouteurl == this.$route.fullPath) {\n      return;\n    }\n    // let tabExitFlag: boolean = false;\n    // this.HomeModule.editableTabs2.map((cItem: any, Cindex: number) => {\n    //   if(child.title == cItem.title) {\n        // this.set_editableTabsValue2(cItem.name + \"\")\n        // tabExitFlag = true;\n      // }\n    // })\n    // if(!tabExitFlag) {\n    //   this.add_editableTabs({\n    //     ...child,\n    //     url: child.baserouteurl\n    //   });\n    // }\n\n    // this.set_formParams({\n    //   ...child,\n    //   url: child.baserouteurl\n    // });\n    // this.$router.push({ path: child.baserouteurl });\n  }\n}\n"],"sourceRoot":""}]}