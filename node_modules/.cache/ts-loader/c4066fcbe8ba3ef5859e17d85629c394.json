{"remainingRequest":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/babel-loader/lib/index.js!/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/ts-loader/index.js??ref--13-2!/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ericchen/Desktop/parttime/xinxin/surface/src/components/common/base-menu.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/src/components/common/base-menu.vue","mtime":1564578844668},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.function.name\";\nimport _defineProperty from \"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/@babel/runtime-corejs2/helpers/esm/inherits\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { keys.push.apply(keys, Object.getOwnPropertySymbols(object)); } if (enumerableOnly) keys = keys.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport * as tslib_1 from \"tslib\";\nimport { Component, Vue, Watch } from \"vue-property-decorator\";\nimport { State, Mutation, Action } from \"vuex-class\";\nimport menuList from \"../../config/menu-config\";\n\nvar BaseMenu =\n/*#__PURE__*/\nfunction (_Vue) {\n  _inherits(BaseMenu, _Vue);\n\n  function BaseMenu() {\n    var _this;\n\n    _classCallCheck(this, BaseMenu);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(BaseMenu).apply(this, arguments));\n    _this.isCollapse = false;\n    _this.menuList = menuList;\n    return _this;\n  }\n\n  _createClass(BaseMenu, [{\n    key: \"created\",\n    value: function created() {\n      var _this2 = this;\n\n      this.$nextTick(function () {\n        _this2.initForm();\n      });\n    }\n  }, {\n    key: \"isAdmin\",\n    value: function isAdmin() {\n      var userStr = sessionStorage.getItem(\"userInfo\");\n      var user = JSON.parse(userStr);\n\n      if (user.username.indexOf(\"admin\") > -1) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  }, {\n    key: \"initTab\",\n    value: function initTab() {\n      if (this.$route.fullPath == \"/home\") {\n        if (this.menuList[0].children) {\n          this.add_editableTabs(_objectSpread({}, this.menuList[0].children[0], {\n            url: this.menuList[0].children[0].baserouteurl\n          }));\n        } else {\n          this.add_editableTabs({\n            url: this.menuList[0].children[0].baserouteurl\n          });\n        }\n\n        this.$router.push(this.menuList[0].children[0].baserouteurl);\n      } else {\n        this.initMenu();\n      }\n    }\n  }, {\n    key: \"initMenu\",\n    value: function initMenu() {\n      var _this3 = this;\n\n      this.menuList.map(function (item) {\n        item.children.map(function (child) {\n          if (child.baserouteurl == _this3.$route.fullPath) {\n            _this3.add_editableTabs(_objectSpread({}, child, {\n              url: child.baserouteurl\n            }));\n          }\n        });\n      });\n    }\n  }, {\n    key: \"watchMenu\",\n    value: function watchMenu(newVal, oldVal) {\n      if (newVal != oldVal && newVal.hasOwnProperty(\"config\") && newVal.config.formList && newVal.config.formList.length) {\n        this.searchList();\n      }\n    }\n  }, {\n    key: \"searchList\",\n    value: function searchList() {\n      var _this4 = this;\n\n      var obj = {};\n      this.HomeModule.formParams.config.formList.map(function (item, index) {\n        if (item.type == \"select\") {\n          _this4.$set(obj, item.name, item.value.value);\n        }\n\n        if (item.type == \"text\") {\n          _this4.$set(obj, item.name, item.value);\n        }\n\n        if (item.type == \"date\") {\n          _this4.$set(obj, item.name[0], _this4.formatDate(item.value[0]));\n\n          _this4.$set(obj, item.name[1], _this4.formatDate(item.value[1]));\n        }\n      });\n      this.getTableList({\n        url: this.HomeModule.formParams.config.apiurl,\n        params: obj\n      });\n    }\n  }, {\n    key: \"formatDate\",\n    value: function formatDate(date) {\n      date = new Date(date);\n      var y = date.getFullYear();\n      var m = date.getMonth() + 1;\n      var d = date.getDate();\n      m = m < 10 ? \"0\" + m : m;\n      d = d < 10 ? \"0\" + d : d;\n      return y + \"-\" + m + \"-\" + d;\n    }\n  }, {\n    key: \"initForm\",\n    value: function initForm() {\n      var _this5 = this;\n\n      this.initTab();\n      this.HomeModule.editableTabs2.map(function (item) {\n        if (item.name == _this5.HomeModule.editableTabsValue2) {\n          _this5.set_formParams(item);\n        }\n      });\n    }\n  }, {\n    key: \"handleOpen\",\n    value: function handleOpen(key, keyPath) {// console.log(key, keyPath);\n    }\n  }, {\n    key: \"handleClose\",\n    value: function handleClose(key, keyPath) {// console.log(key, keyPath);\n    }\n  }, {\n    key: \"addTabList\",\n    value: function addTabList(item, child) {\n      // console.log(child)\n      this.add_editableTabs(_objectSpread({}, child, {\n        url: child.baserouteurl\n      }));\n      this.set_formParams(_objectSpread({}, child, {\n        url: child.baserouteurl\n      }));\n      this.$router.push({\n        path: child.baserouteurl\n      });\n    }\n  }]);\n\n  return BaseMenu;\n}(Vue);\n\ntslib_1.__decorate([State(\"HomeModule\")], BaseMenu.prototype, \"HomeModule\", void 0);\n\ntslib_1.__decorate([Mutation(\"add_editableTabs\")], BaseMenu.prototype, \"add_editableTabs\", void 0);\n\ntslib_1.__decorate([Mutation(\"set_formParams\")], BaseMenu.prototype, \"set_formParams\", void 0);\n\ntslib_1.__decorate([Action(\"getTableList\")], BaseMenu.prototype, \"getTableList\", void 0);\n\ntslib_1.__decorate([Watch(\"HomeModule.formParams\")], BaseMenu.prototype, \"watchMenu\", null);\n\nBaseMenu = tslib_1.__decorate([Component({\n  components: {}\n})], BaseMenu);\nexport default BaseMenu;",{"version":3,"sources":["/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ericchen/Desktop/parttime/xinxin/surface/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ericchen/Desktop/parttime/xinxin/surface/src/components/common/base-menu.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Watch } from \"vue-property-decorator\";\nimport { State, Mutation, Action } from \"vuex-class\";\nimport menuList from \"../../config/menu-config\";\nimport HomeModule from \"../../store/module/home/home-module\";\n\n@Component({\n  components: {}\n})\nexport default class BaseMenu extends Vue {\n  @State(\"HomeModule\") private HomeModule!: any;\n  @Mutation(\"add_editableTabs\") private add_editableTabs: any;\n  @Mutation(\"set_formParams\") private set_formParams: any;\n  @Action(\"getTableList\") private getTableList: any;\n  private isCollapse: Boolean = false;\n  private menuList: any = menuList;\n\n  created() {\n    this.$nextTick(() => {\n      this.initForm();\n    })\n  }\n  isAdmin() {\n    let userStr: any = sessionStorage.getItem(\"userInfo\");\n    let user: any = JSON.parse(userStr);\n    if (user.username.indexOf(\"admin\") > -1) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  initTab() {\n    if (this.$route.fullPath == \"/home\") {\n      if (this.menuList[0].children) {\n        this.add_editableTabs({\n          ...this.menuList[0].children[0],\n          url: this.menuList[0].children[0].baserouteurl\n        });\n      } else {\n        this.add_editableTabs({\n          url: this.menuList[0].children[0].baserouteurl\n        });\n      }\n      this.$router.push(this.menuList[0].children[0].baserouteurl);\n    } else {\n      this.initMenu();\n    }\n  }\n\n  initMenu() {\n    \n    this.menuList.map((item: any) => {\n      item.children.map((child: any) => {\n        if (child.baserouteurl == this.$route.fullPath) {\n          this.add_editableTabs({\n            ...child,\n            url: child.baserouteurl\n          });\n        }\n      });\n    });\n  }\n\n  @Watch(\"HomeModule.formParams\")\n  watchMenu(newVal: any, oldVal: any) {\n    if (\n      newVal != oldVal &&\n      newVal.hasOwnProperty(\"config\") &&\n      newVal.config.formList &&\n      newVal.config.formList.length\n    ) {\n      this.searchList();\n    }\n  }\n\n  searchList() {\n    let obj: any = {};\n    this.HomeModule.formParams.config.formList.map((item: any, index: any) => {\n      if (item.type == \"select\") {\n        this.$set(obj, item.name, item.value.value);\n      }\n      if (item.type == \"text\") {\n        this.$set(obj, item.name, item.value);\n      }\n      if (item.type == \"date\") {\n        this.$set(obj, item.name[0], this.formatDate(item.value[0]));\n        this.$set(obj, item.name[1], this.formatDate(item.value[1]));\n      }\n    });\n    this.getTableList({\n      url: this.HomeModule.formParams.config.apiurl,\n      params: obj\n    });\n  }\n\n  formatDate(date: any) {\n    date = new Date(date);\n    var y = date.getFullYear();\n    var m = date.getMonth() + 1;\n    var d = date.getDate();\n    m = m < 10 ? \"0\" + m : m;\n    d = d < 10 ? \"0\" + d : d;\n    return y + \"-\" + m + \"-\" + d;\n  }\n\n  initForm() {\n    this.initTab();\n    this.HomeModule.editableTabs2.map((item: any) => {\n      if (item.name == this.HomeModule.editableTabsValue2) {\n        this.set_formParams(item);\n      }\n    });\n  }\n  handleOpen(key: any, keyPath: any) {\n    // console.log(key, keyPath);\n  }\n  handleClose(key: any, keyPath: any) {\n    // console.log(key, keyPath);\n  }\n  addTabList(item: any, child: any) {\n    // console.log(child)\n    this.add_editableTabs({\n      ...child,\n      url: child.baserouteurl\n    });\n    this.set_formParams({\n      ...child,\n      url: child.baserouteurl\n    });\n    this.$router.push({ path: child.baserouteurl });\n  }\n}\n"],"sourceRoot":""}]}